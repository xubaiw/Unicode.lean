<html lang="en">
<head>
<link rel="stylesheet" href="/Unicode.lean/style.css"></link><link rel="stylesheet" href="/Unicode.lean/pygments.css"></link><link rel="shortcut icon" href="/Unicode.lean/favicon.ico"></link><title>Lean.Server.Watchdog</title>
<meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta></head>
<body>
<input id="nav_toggle" type="checkbox"></input><header>
<h1>
<label for="nav_toggle">
</label>
Documentation</h1>
<p class="header_filename break_within">Lean.Server.Watchdog</p>
<form action="https://google.com/search" method="get" id="search_form">
<input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib_docs"></input><input type="text" name="q" autocomplete="off"></input><button>Google site search</button>
</form>
</header>
<nav class="internal_nav">
<h3>
<a class="break_within" href="#top">Lean.Server.Watchdog</a>
</h3>
<p class="gh_nav_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean">source</a>
</p>
<div class="imports">
<details>
<summary>Imports</summary>
<ul>
<li>
<a href="/Unicode.lean/Init.html">Init</a>
</li>
<li>
<a href="/Unicode.lean/Init/Data/ByteArray.html">Init.Data.ByteArray</a>
</li>
<li>
<a href="/Unicode.lean/Init/System/IO.html">Init.System.IO</a>
</li>
<li>
<a href="/Unicode.lean/Lean/Data/Json.html">Lean.Data.Json</a>
</li>
<li>
<a href="/Unicode.lean/Lean/Data/Lsp.html">Lean.Data.Lsp</a>
</li>
<li>
<a href="/Unicode.lean/Lean/Elab/Import.html">Lean.Elab.Import</a>
</li>
<li>
<a href="/Unicode.lean/Lean/Server/References.html">Lean.Server.References</a>
</li>
<li>
<a href="/Unicode.lean/Lean/Server/Requests.html">Lean.Server.Requests</a>
</li>
<li>
<a href="/Unicode.lean/Lean/Server/Utils.html">Lean.Server.Utils</a>
</li>
<li>
<a href="/Unicode.lean/Lean/Util/Paths.html">Lean.Util.Paths</a>
</li>
<li>
<a href="/Unicode.lean/Std/Data/RBMap.html">Std.Data.RBMap</a>
</li>
</ul>
</details>
<details>
<summary>Imported by</summary>
<ul>
<li>
<a href="/Unicode.lean/Lean/Server.html">Lean.Server</a>
</li>
</ul>
</details>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.OpenDocument">Lean.Server.Watchdog.OpenDocument</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.workerCfg">Lean.Server.Watchdog.workerCfg</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.WorkerState">Lean.Server.Watchdog.WorkerState</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.PendingRequestMap">Lean.Server.Watchdog.PendingRequestMap</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.GroupedEdits">Lean.Server.Watchdog.GroupedEdits</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.FileWorker.stdin">Lean.Server.Watchdog.FileWorker.stdin</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.FileWorker.stdout">Lean.Server.Watchdog.FileWorker.stdout</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.FileWorker.erasePendingRequest">Lean.Server.Watchdog.FileWorker.erasePendingRequest</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.FileWorker.errorPendingRequests">Lean.Server.Watchdog.FileWorker.errorPendingRequests</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.FileWorker.runEditsSignalTask">Lean.Server.Watchdog.FileWorker.runEditsSignalTask</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.FileWorker.runEditsSignalTask.loopAction">Lean.Server.Watchdog.FileWorker.runEditsSignalTask.loopAction</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.FileWorkerMap">Lean.Server.Watchdog.FileWorkerMap</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.ServerContext">Lean.Server.Watchdog.ServerContext</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.updateFileWorkers">Lean.Server.Watchdog.updateFileWorkers</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.findFileWorker?">Lean.Server.Watchdog.findFileWorker?</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.findFileWorker!">Lean.Server.Watchdog.findFileWorker!</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.eraseFileWorker">Lean.Server.Watchdog.eraseFileWorker</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.log">Lean.Server.Watchdog.log</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleIleanInfoUpdate">Lean.Server.Watchdog.handleIleanInfoUpdate</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleIleanInfoFinal">Lean.Server.Watchdog.handleIleanInfoFinal</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.startFileWorker">Lean.Server.Watchdog.startFileWorker</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.terminateFileWorker">Lean.Server.Watchdog.terminateFileWorker</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleCrash">Lean.Server.Watchdog.handleCrash</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.tryWriteMessage">Lean.Server.Watchdog.tryWriteMessage</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.findDefinitions">Lean.Server.Watchdog.findDefinitions</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleReference">Lean.Server.Watchdog.handleReference</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleWorkspaceSymbol">Lean.Server.Watchdog.handleWorkspaceSymbol</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleWorkspaceSymbol.containsCaseInsensitive">Lean.Server.Watchdog.handleWorkspaceSymbol.containsCaseInsensitive</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder">Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleDidOpen">Lean.Server.Watchdog.handleDidOpen</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleEdits">Lean.Server.Watchdog.handleEdits</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleDidClose">Lean.Server.Watchdog.handleDidClose</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleDidChangeWatchedFiles">Lean.Server.Watchdog.handleDidChangeWatchedFiles</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleCancelRequest">Lean.Server.Watchdog.handleCancelRequest</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.forwardNotification">Lean.Server.Watchdog.forwardNotification</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.parseParams">Lean.Server.Watchdog.parseParams</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.forwardRequestToWorker">Lean.Server.Watchdog.forwardRequestToWorker</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleRequest">Lean.Server.Watchdog.handleRequest</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.handleNotification">Lean.Server.Watchdog.handleNotification</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.shutdown">Lean.Server.Watchdog.shutdown</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.ServerEvent">Lean.Server.Watchdog.ServerEvent</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.runClientTask">Lean.Server.Watchdog.runClientTask</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.mainLoop">Lean.Server.Watchdog.mainLoop</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.mkLeanServerCapabilities">Lean.Server.Watchdog.mkLeanServerCapabilities</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.initAndRunWatchdogAux">Lean.Server.Watchdog.initAndRunWatchdogAux</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.findWorkerPath">Lean.Server.Watchdog.findWorkerPath</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.loadReferences">Lean.Server.Watchdog.loadReferences</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.initAndRunWatchdog">Lean.Server.Watchdog.initAndRunWatchdog</a>
</div>
<div class="nav_link">
<a class="break_within" href="#Lean.Server.Watchdog.watchdogMain">Lean.Server.Watchdog.watchdogMain</a>
</div>
</nav>
<main>
<div class="mod_doc">
<p>For general server architecture, see <code>README.md</code>. This module implements the watchdog process.</p><h2 class="markdown-heading" id="watchdog-state">Watchdog state <a class="hover-link" href="#watchdog-state">#</a></h2><p>Most LSP clients only send us file diffs, so to facilitate sending entire file contents to freshly restarted
workers, the watchdog needs to maintain the current state of each file. It can also use this state to detect changes
to the header and thus restart the corresponding worker, freeing its imports.</p><p>TODO(WN):
We may eventually want to keep track of approximately (since this isn't knowable exactly) where in the file a worker
crashed. Then on restart, we tell said worker to only parse up to that point and query the user about how to proceed
(continue OR allow the user to fix the bug and then continue OR ..). Without this, if the crash is deterministic,
users may be confused about why the server seemingly stopped working for a single file.</p><h2 class="markdown-heading" id="watchdog---worker-communication">Watchdog <-> worker communication <a class="hover-link" href="#watchdog---worker-communication">#</a></h2><p>The watchdog process and its file worker processes communicate via LSP. If the necessity arises,
we might add non-standard commands similarly based on JSON-RPC. Most requests and notifications
are forwarded to the corresponding file worker process, with the exception of these notifications:</p><ul>
<li>textDocument/didOpen: Launch the file worker, create the associated watchdog state and launch a task to
asynchronously receive LSP packets from the worker (e.g. request responses).</li>
<li>textDocument/didChange: Update the local file state. If the header was mutated,
signal a shutdown to the file worker by closing the I/O channels.
Then restart the file worker. Otherwise, forward the <code>didChange</code> notification.</li>
<li>textDocument/didClose: Signal a shutdown to the file worker and remove the associated watchdog state.</li>
</ul><p>Moreover, we don't implement the full protocol at this level:</p><ul>
<li>Upon starting, the <code>initialize</code> request is forwarded to the worker, but it must not respond with its server
capabilities. Consequently, the watchdog will not send an <code>initialized</code> notification to the worker.</li>
<li>After <code>initialize</code>, the watchdog sends the corresponding <code>didOpen</code> notification with the full current state of
the file. No additional <code>didOpen</code> notifications will be forwarded to the worker process.</li>
<li><code>$/cancelRequest</code> notifications are forwarded to all file workers.</li>
<li>File workers are always terminated with an <code>exit</code> notification, without previously receiving a <code><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.shutdown">shutdown</a></code> request.
Similarly, they never receive a <code>didClose</code> notification.</li>
</ul><h2 class="markdown-heading" id="watchdog---client-communication">Watchdog <-> client communication <a class="hover-link" href="#watchdog---client-communication">#</a></h2><p>The watchdog itself should implement the LSP standard as closely as possible. However we reserve the right to add
non-standard extensions in case they're needed, for example to communicate tactic state.</p></div>
<div class="decl" id="Lean.Server.Watchdog.OpenDocument">
<div class="structure">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L72-L74">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">structure</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.OpenDocument">Lean.Server.Watchdog.OpenDocument</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn">Type</span></div></div>
<ul class="structure_fields" id="Lean.Server.Watchdog.OpenDocument.mk">
<li class="structure_field" id="Lean.Server.Watchdog.OpenDocument.meta">
meta : <a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Server.DocumentMeta">Lean.Server.DocumentMeta</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.OpenDocument.headerAst">
headerAst : <a href="/Unicode.lean/Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></li>
</ul>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.workerCfg">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L76-L81">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.workerCfg">Lean.Server.Watchdog.workerCfg</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><a href="/Unicode.lean/Init/System/IO.html#IO.Process.StdioConfig">IO.Process.StdioConfig</a></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.workerCfg">Lean.Server.Watchdog.workerCfg</a> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn">{ stdin := <a href="/Unicode.lean/Init/System/IO.html#IO.Process.Stdio.piped">IO.Process.Stdio.piped</a>, stdout := <a href="/Unicode.lean/Init/System/IO.html#IO.Process.Stdio.piped">IO.Process.Stdio.piped</a>, stderr := <a href="/Unicode.lean/Init/System/IO.html#IO.Process.Stdio.inherit">IO.Process.Stdio.inherit</a> }</span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.WorkerEvent">
<div class="inductive">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L84-L89">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">inductive</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn">Type</span></div></div>
<ul class="constructors">
<li class="constructor" id="Lean.Server.Watchdog.WorkerEvent.processGroupedEdits">
processGroupedEdits: <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a></li>
<li class="constructor" id="Lean.Server.Watchdog.WorkerEvent.terminated">
terminated: <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a></li>
<li class="constructor" id="Lean.Server.Watchdog.WorkerEvent.crashed">
crashed: <span class="fn"><a href="/Unicode.lean/Init/System/IOError.html#IO.Error">IO.Error</a> → <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a></span></li>
<li class="constructor" id="Lean.Server.Watchdog.WorkerEvent.ioError">
ioError: <span class="fn"><a href="/Unicode.lean/Init/System/IOError.html#IO.Error">IO.Error</a> → <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a></span></li>
</ul>
<p>Events that worker-specific tasks signal to the main thread.</p></div>
</div>
<div class="decl" id="Lean.Server.Watchdog.WorkerState">
<div class="inductive">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L91-L100">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">inductive</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerState">Lean.Server.Watchdog.WorkerState</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn">Type</span></div></div>
<ul class="constructors">
<li class="constructor" id="Lean.Server.Watchdog.WorkerState.crashed">
crashed: <span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a></span> → <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerState">Lean.Server.Watchdog.WorkerState</a></span></li>
<li class="constructor" id="Lean.Server.Watchdog.WorkerState.running">
running: <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerState">Lean.Server.Watchdog.WorkerState</a></li>
</ul>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.PendingRequestMap">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L102-L102">source</a>
</div>
<div class="attributes">@[inline]</div>
<div class="decl_header">
<span class="decl_kind">abbrev</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.PendingRequestMap">Lean.Server.Watchdog.PendingRequestMap</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn">Type</span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.PendingRequestMap">Lean.Server.Watchdog.PendingRequestMap</a> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn"><a href="/Unicode.lean/Std/Data/RBMap.html#Std.RBMap">Std.RBMap</a> <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID">Lean.JsonRpc.RequestID</a> <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a> <span class="fn">compare</span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.GroupedEdits">
<div class="structure">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L112-L119">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">structure</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.GroupedEdits">Lean.Server.Watchdog.GroupedEdits</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn">Type</span></div></div>
<ul class="structure_fields" id="Lean.Server.Watchdog.GroupedEdits.mk">
<li class="structure_field" id="Lean.Server.Watchdog.GroupedEdits.applyTime">
applyTime : <a href="/Unicode.lean/Init/Prelude.html#Nat">Nat</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.GroupedEdits.params">
params : <a href="/Unicode.lean/Lean/Data/Lsp/TextSync.html#Lean.Lsp.DidChangeTextDocumentParams">Lean.Lsp.DidChangeTextDocumentParams</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.GroupedEdits.signalTask">
signalTask : <span class="fn"><a href="/Unicode.lean/Init/Core.html#Task">Task</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a></span></li>
<li class="structure_field" id="Lean.Server.Watchdog.GroupedEdits.queuedMsgs">
queuedMsgs : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a></span></li>
</ul>
<p>A group of edits which will be processed at a future instant.</p></div>
</div>
<div class="decl" id="Lean.Server.Watchdog.FileWorker">
<div class="structure">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L121-L131">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">structure</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn">Type</span></div></div>
<ul class="structure_fields" id="Lean.Server.Watchdog.FileWorker.mk">
<li class="structure_field" id="Lean.Server.Watchdog.FileWorker.doc">
doc : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.OpenDocument">Lean.Server.Watchdog.OpenDocument</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.FileWorker.proc">
proc : <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.Process.Child">IO.Process.Child</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.workerCfg">Lean.Server.Watchdog.workerCfg</a></span></li>
<li class="structure_field" id="Lean.Server.Watchdog.FileWorker.commTask">
commTask : <span class="fn"><a href="/Unicode.lean/Init/Core.html#Task">Task</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a></span></li>
<li class="structure_field" id="Lean.Server.Watchdog.FileWorker.state">
state : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerState">Lean.Server.Watchdog.WorkerState</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.FileWorker.pendingRequestsRef">
pendingRequestsRef : <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.Ref">IO.Ref</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.PendingRequestMap">Lean.Server.Watchdog.PendingRequestMap</a></span></li>
<li class="structure_field" id="Lean.Server.Watchdog.FileWorker.groupedEditsRef">
groupedEditsRef : <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.Ref">IO.Ref</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option">Option</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.GroupedEdits">Lean.Server.Watchdog.GroupedEdits</a></span>)</span></li>
</ul>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.FileWorker.stdin">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L135-L136">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.stdin">Lean.Server.Watchdog.FileWorker.stdin</a>
</span>
<span class="decl_args">
<span class="fn">(fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.stdin">Lean.Server.Watchdog.FileWorker.stdin</a> <span class="fn">fw</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream.ofHandle">IO.FS.Stream.ofHandle</a> <span class="fn"><span class="fn"><span class="fn">fw</span>.proc</span>.stdin</span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.FileWorker.stdout">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L138-L139">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.stdout">Lean.Server.Watchdog.FileWorker.stdout</a>
</span>
<span class="decl_args">
<span class="fn">(fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.stdout">Lean.Server.Watchdog.FileWorker.stdout</a> <span class="fn">fw</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream.ofHandle">IO.FS.Stream.ofHandle</a> <span class="fn"><span class="fn"><span class="fn">fw</span>.proc</span>.stdout</span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.FileWorker.erasePendingRequest">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L141-L142">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.erasePendingRequest">Lean.Server.Watchdog.FileWorker.erasePendingRequest</a>
</span>
<span class="decl_args">
<span class="fn">(fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>)</span></span>
<span class="decl_args">
<span class="fn">(id : <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID">Lean.JsonRpc.RequestID</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.erasePendingRequest">Lean.Server.Watchdog.FileWorker.erasePendingRequest</a> <span class="fn">fw</span> <span class="fn">id</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <span class="fn"><span class="fn">fw</span>.pendingRequestsRef</span> <span class="fn">fun <span class="fn">pendingRequests</span> => <span class="fn"><a href="/Unicode.lean/Std/Data/RBMap.html#Std.RBMap.erase">Std.RBMap.erase</a> <span class="fn">pendingRequests</span> <span class="fn">id</span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.FileWorker.errorPendingRequests">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L144-L147">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.errorPendingRequests">Lean.Server.Watchdog.FileWorker.errorPendingRequests</a>
</span>
<span class="decl_args">
<span class="fn">(fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>)</span></span>
<span class="decl_args">
<span class="fn">(hError : <a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a>)</span></span>
<span class="decl_args">
<span class="fn">(code : <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.ErrorCode">Lean.JsonRpc.ErrorCode</a>)</span></span>
<span class="decl_args">
<span class="fn">(msg : <a href="/Unicode.lean/Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.errorPendingRequests">Lean.Server.Watchdog.FileWorker.errorPendingRequests</a> <span class="fn">fw</span> <span class="fn">hError</span> <span class="fn">code</span> <span class="fn">msg</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let pendingRequests ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modifyGet">ST.Ref.modifyGet</a> <span class="fn"><span class="fn">fw</span>.pendingRequestsRef</span> <span class="fn">fun <span class="fn">pendingRequests</span> => <span class="fn">(<span class="fn">pendingRequests</span>, <span class="fn">Std.RBMap.empty</span>)</span></span></span>
  let r ←
    <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">pendingRequests</span> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">fun <span class="fn">x</span> <span class="fn">r</span> =>
        <span class="fn">match <span class="fn">x</span> with
        | <span class="fn">(<span class="fn">id</span>, <span class="fn">x</span>)</span> => <span class="fn">do
          <span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspResponseError">IO.FS.Stream.writeLspResponseError</a> <span class="fn">hError</span> <span class="fn">{ id := <span class="fn">id</span>, code := <span class="fn">code</span>, message := <span class="fn">msg</span>, data? := <span class="fn">none</span> }</span></span>
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span></span></span></span>
  let x : <a href="/Unicode.lean/Init/Prelude.html#PUnit">PUnit</a> := <span class="fn">r</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.FileWorker.runEditsSignalTask">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L149-L164">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.runEditsSignalTask">Lean.Server.Watchdog.FileWorker.runEditsSignalTask</a>
</span>
<span class="decl_args">
<span class="fn">(fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#Task">Task</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a></span>)</span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.runEditsSignalTask">Lean.Server.Watchdog.FileWorker.runEditsSignalTask</a> <span class="fn">fw</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let t ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.asTask">IO.asTask</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.runEditsSignalTask.loopAction">Lean.Server.Watchdog.FileWorker.runEditsSignalTask.loopAction</a> <span class="fn">fw</span></span>) <a href="/Unicode.lean/Init/Core.html#Task.Priority.default">Task.Priority.default</a></span>)</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a>
      (<span class="fn"><a href="/Unicode.lean/Init/Core.html#Task.map">Task.map</a>
        (<span class="fn">fun <span class="fn">x</span> =>
          <span class="fn">match <span class="fn">x</span> with
          | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Except.error">Except.ok</a> <span class="fn">ev</span></span> => <span class="fn">ev</span>
          | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Except.error">Except.error</a> <span class="fn">e</span></span> => <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent.ioError">Lean.Server.Watchdog.WorkerEvent.ioError</a> <span class="fn">e</span></span></span></span>)
        <span class="fn">t</span></span>)</span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.FileWorker.runEditsSignalTask.loopAction">
<div class="constant">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L151-L159">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">partial def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.runEditsSignalTask.loopAction">Lean.Server.Watchdog.FileWorker.runEditsSignalTask.loopAction</a>
</span>
<span class="decl_args">
<span class="fn">(fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a></span></div></div>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.FileWorkerMap">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L170-L170">source</a>
</div>
<div class="attributes">@[inline]</div>
<div class="decl_header">
<span class="decl_kind">abbrev</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorkerMap">Lean.Server.Watchdog.FileWorkerMap</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn">Type</span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorkerMap">Lean.Server.Watchdog.FileWorkerMap</a> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn"><a href="/Unicode.lean/Std/Data/RBMap.html#Std.RBMap">Std.RBMap</a> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.DocumentUri">Lean.Lsp.DocumentUri</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a> <span class="fn">compare</span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.ServerContext">
<div class="structure">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L172-L184">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">structure</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerContext">Lean.Server.Watchdog.ServerContext</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn">Type</span></div></div>
<ul class="structure_fields" id="Lean.Server.Watchdog.ServerContext.mk">
<li class="structure_field" id="Lean.Server.Watchdog.ServerContext.hIn">
hIn : <a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.ServerContext.hOut">
hOut : <a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.ServerContext.hLog">
hLog : <a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.ServerContext.args">
args : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#List">List</a> <a href="/Unicode.lean/Init/Prelude.html#String">String</a></span></li>
<li class="structure_field" id="Lean.Server.Watchdog.ServerContext.fileWorkersRef">
fileWorkersRef : <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.Ref">IO.Ref</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorkerMap">Lean.Server.Watchdog.FileWorkerMap</a></span></li>
<li class="structure_field" id="Lean.Server.Watchdog.ServerContext.initParams">
initParams : <a href="/Unicode.lean/Lean/Data/Lsp/InitShutdown.html#Lean.Lsp.InitializeParams">Lean.Lsp.InitializeParams</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.ServerContext.editDelay">
editDelay : <a href="/Unicode.lean/Init/Prelude.html#Nat">Nat</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.ServerContext.workerPath">
workerPath : <a href="/Unicode.lean/Init/System/FilePath.html#System.FilePath">System.FilePath</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.ServerContext.srcSearchPath">
srcSearchPath : <a href="/Unicode.lean/Init/System/FilePath.html#System.SearchPath">System.SearchPath</a></li>
<li class="structure_field" id="Lean.Server.Watchdog.ServerContext.references">
references : <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.Ref">IO.Ref</a> <a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References">Lean.Server.References</a></span></li>
</ul>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.ServerM">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L186-L186">source</a>
</div>
<div class="attributes">@[inline]</div>
<div class="decl_header">
<span class="decl_kind">abbrev</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a>
</span>
<span class="decl_args">
<span class="fn">(α : <span class="fn">Type</span>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn">Type</span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#ReaderT">ReaderT</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerContext">Lean.Server.Watchdog.ServerContext</a> <a href="/Unicode.lean/Init/System/IO.html#IO">IO</a></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.updateFileWorkers">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L188-L189">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.updateFileWorkers">Lean.Server.Watchdog.updateFileWorkers</a>
</span>
<span class="decl_args">
<span class="fn">(val : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.updateFileWorkers">Lean.Server.Watchdog.updateFileWorkers</a> <span class="fn">val</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let a ← <span class="fn">read</span>
  <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <span class="fn"><span class="fn">a</span>.fileWorkersRef</span> <span class="fn">fun <span class="fn">fileWorkers</span> => <span class="fn"><a href="/Unicode.lean/Std/Data/RBMap.html#Std.RBMap.insert">Std.RBMap.insert</a> <span class="fn">fileWorkers</span> <span class="fn"><span class="fn"><span class="fn"><span class="fn">val</span>.doc</span>.meta</span>.uri</span> <span class="fn">val</span></span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.findFileWorker?">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L191-L192">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findFileWorker?">Lean.Server.Watchdog.findFileWorker?</a>
</span>
<span class="decl_args">
<span class="fn">(uri : <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.DocumentUri">Lean.Lsp.DocumentUri</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option">Option</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a></span>)</span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findFileWorker?">Lean.Server.Watchdog.findFileWorker?</a> <span class="fn">uri</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let a ← <span class="fn">read</span>
  let a ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.get">ST.Ref.get</a> <span class="fn"><span class="fn">a</span>.fileWorkersRef</span></span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Std/Data/RBMap.html#Std.RBMap.find?">Std.RBMap.find?</a> <span class="fn">a</span> <span class="fn">uri</span></span>)</span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.findFileWorker!">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L194-L197">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findFileWorker!">Lean.Server.Watchdog.findFileWorker!</a>
</span>
<span class="decl_args">
<span class="fn">(uri : <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.DocumentUri">Lean.Lsp.DocumentUri</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findFileWorker!">Lean.Server.Watchdog.findFileWorker!</a> <span class="fn">uri</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let discr ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findFileWorker?">Lean.Server.Watchdog.findFileWorker?</a> <span class="fn">uri</span></span>
  <span class="fn">match <span class="fn">discr</span> with
    | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">fw</span></span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">fw</span></span>
    | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#IO.throwServerError">IO.throwServerError</a> (<span class="fn"><span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"cannot find open document '"</span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">uri</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"'"</span></span></span>)</span>)</span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.eraseFileWorker">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L199-L204">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.eraseFileWorker">Lean.Server.Watchdog.eraseFileWorker</a>
</span>
<span class="decl_args">
<span class="fn">(uri : <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.DocumentUri">Lean.Lsp.DocumentUri</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.eraseFileWorker">Lean.Server.Watchdog.eraseFileWorker</a> <span class="fn">uri</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let s ← <span class="fn">read</span>
  <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <span class="fn"><span class="fn">s</span>.fileWorkersRef</span> <span class="fn">fun <span class="fn">fileWorkers</span> => <span class="fn"><a href="/Unicode.lean/Std/Data/RBMap.html#Std.RBMap.erase">Std.RBMap.erase</a> <span class="fn">fileWorkers</span> <span class="fn">uri</span></span></span></span>
  <span class="fn">match <span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Lsp.DocumentUri.toPath?">Lean.Lsp.DocumentUri.toPath?</a> <span class="fn">uri</span></span> with
    | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">path</span></span> => <span class="fn">do
      let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Util/Path.html#Lean.searchModuleNameOfFileName">Lean.searchModuleNameOfFileName</a> <span class="fn">path</span> <span class="fn"><span class="fn">s</span>.srcSearchPath</span></span>)</span>
      <span class="fn">match <span class="fn">a</span> with
        | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">module</span></span> => <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <span class="fn"><span class="fn">s</span>.references</span> <span class="fn">fun <span class="fn">refs</span> => <span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.removeWorkerRefs">Lean.Server.References.removeWorkerRefs</a> <span class="fn">refs</span> <span class="fn">module</span></span></span></span>
        | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">PUnit.unit</span></span></span></span>
    | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">PUnit.unit</span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.log">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L206-L209">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.log">Lean.Server.Watchdog.log</a>
</span>
<span class="decl_args">
<span class="fn">(msg : <a href="/Unicode.lean/Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.log">Lean.Server.Watchdog.log</a> <span class="fn">msg</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let st ← <span class="fn">read</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream.putStrLn">IO.FS.Stream.putStrLn</a> <span class="fn"><span class="fn">st</span>.hLog</span> <span class="fn">msg</span></span>)</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> <span class="fn"><span class="fn"><span class="fn">st</span>.hLog</span>.flush</span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleIleanInfoUpdate">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L211-L215">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleIleanInfoUpdate">Lean.Server.Watchdog.handleIleanInfoUpdate</a>
</span>
<span class="decl_args">
<span class="fn">(fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>)</span></span>
<span class="decl_args">
<span class="fn">(params : <a href="/Unicode.lean/Lean/Data/Lsp/Internal.html#Lean.Lsp.LeanIleanInfoParams">Lean.Lsp.LeanIleanInfoParams</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleIleanInfoUpdate">Lean.Server.Watchdog.handleIleanInfoUpdate</a> <span class="fn">fw</span> <span class="fn">params</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let s ← <span class="fn">read</span>
  <span class="fn">match <span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Lsp.DocumentUri.toPath?">Lean.Lsp.DocumentUri.toPath?</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">fw</span>.doc</span>.meta</span>.uri</span></span> with
    | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">path</span></span> => <span class="fn">do
      let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Util/Path.html#Lean.searchModuleNameOfFileName">Lean.searchModuleNameOfFileName</a> <span class="fn">path</span> <span class="fn"><span class="fn">s</span>.srcSearchPath</span></span>)</span>
      <span class="fn">match <span class="fn">a</span> with
        | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">module</span></span> =>
          <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <span class="fn"><span class="fn">s</span>.references</span> <span class="fn">fun <span class="fn">refs</span> =>
            <span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.updateWorkerRefs">Lean.Server.References.updateWorkerRefs</a> <span class="fn">refs</span> <span class="fn">module</span> <span class="fn"><span class="fn">params</span>.version</span> <span class="fn"><span class="fn">params</span>.references</span></span></span></span>
        | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">PUnit.unit</span></span></span></span>
    | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">PUnit.unit</span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleIleanInfoFinal">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L217-L221">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleIleanInfoFinal">Lean.Server.Watchdog.handleIleanInfoFinal</a>
</span>
<span class="decl_args">
<span class="fn">(fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>)</span></span>
<span class="decl_args">
<span class="fn">(params : <a href="/Unicode.lean/Lean/Data/Lsp/Internal.html#Lean.Lsp.LeanIleanInfoParams">Lean.Lsp.LeanIleanInfoParams</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleIleanInfoFinal">Lean.Server.Watchdog.handleIleanInfoFinal</a> <span class="fn">fw</span> <span class="fn">params</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let s ← <span class="fn">read</span>
  <span class="fn">match <span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Lsp.DocumentUri.toPath?">Lean.Lsp.DocumentUri.toPath?</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">fw</span>.doc</span>.meta</span>.uri</span></span> with
    | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">path</span></span> => <span class="fn">do
      let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Util/Path.html#Lean.searchModuleNameOfFileName">Lean.searchModuleNameOfFileName</a> <span class="fn">path</span> <span class="fn"><span class="fn">s</span>.srcSearchPath</span></span>)</span>
      <span class="fn">match <span class="fn">a</span> with
        | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">module</span></span> =>
          <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <span class="fn"><span class="fn">s</span>.references</span> <span class="fn">fun <span class="fn">refs</span> =>
            <span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.finalizeWorkerRefs">Lean.Server.References.finalizeWorkerRefs</a> <span class="fn">refs</span> <span class="fn">module</span> <span class="fn"><span class="fn">params</span>.version</span> <span class="fn"><span class="fn">params</span>.references</span></span></span></span>
        | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">PUnit.unit</span></span></span></span>
    | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">PUnit.unit</span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.startFileWorker">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L269-L302">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.startFileWorker">Lean.Server.Watchdog.startFileWorker</a>
</span>
<span class="decl_args">
<span class="fn">(m : <a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Server.DocumentMeta">Lean.Server.DocumentMeta</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.startFileWorker">Lean.Server.Watchdog.startFileWorker</a> <span class="fn">m</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let a ← <span class="fn">read</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Server.publishProgressAtPos">Lean.Server.publishProgressAtPos</a> <span class="fn">m</span> <span class="fn">0</span> <span class="fn"><span class="fn">a</span>.hOut</span> <a href="/Unicode.lean/Lean/Data/Lsp/Extra.html#Lean.Lsp.LeanFileProgressKind.processing">Lean.Lsp.LeanFileProgressKind.processing</a></span>)</span>
  let st ← <span class="fn">read</span>
  let headerAst ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#_private.Lean.Server.Watchdog.0.Lean.Server.Watchdog.parseHeaderAst">Lean.Server.Watchdog.parseHeaderAst</a> <span class="fn"><span class="fn"><span class="fn">m</span>.text</span>.source</span></span>)</span>
  let workerProc ←
    <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a>
        (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.Process.spawn">IO.Process.spawn</a>
          <span class="fn">{ toStdioConfig := <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.workerCfg">Lean.Server.Watchdog.workerCfg</a>, cmd := <span class="fn"><span class="fn"><span class="fn">st</span>.workerPath</span>.toString</span>,
            args := <span class="fn"><span class="fn"><span class="fn">#[<span class="fn">"--worker"</span>]</span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#List.toArray">List.toArray</a> <span class="fn"><span class="fn">st</span>.args</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn">#[<span class="fn"><span class="fn">m</span>.uri</span>]</span></span>, cwd := <span class="fn">none</span>, env := <span class="fn">#[]</span> }</span></span>)</span>
  let pendingRequestsRef ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.mkRef">IO.mkRef</a> <span class="fn">Std.RBMap.empty</span></span>)</span>
  let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.mkRef">IO.mkRef</a> <span class="fn">none</span></span>)</span>
  let fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a> :=
    <span class="fn">{ doc := <span class="fn">{ meta := <span class="fn">m</span>, headerAst := <span class="fn">headerAst</span> }</span>, proc := <span class="fn">workerProc</span>,
      commTask := <span class="fn">{ get := <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent.terminated">Lean.Server.Watchdog.WorkerEvent.terminated</a> }</span>,
      state := <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerState.running">Lean.Server.Watchdog.WorkerState.running</a>, pendingRequestsRef := <span class="fn">pendingRequestsRef</span>,
      groupedEditsRef := <span class="fn">a</span> }</span>
  let commTask ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#_private.Lean.Server.Watchdog.0.Lean.Server.Watchdog.forwardMessages">Lean.Server.Watchdog.forwardMessages</a> <span class="fn">fw</span></span>
  let fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a> :=
    <span class="fn">{ doc := <span class="fn"><span class="fn">fw</span>.doc</span>, proc := <span class="fn"><span class="fn">fw</span>.proc</span>, commTask := <span class="fn">commTask</span>, state := <span class="fn"><span class="fn">fw</span>.state</span>,
      pendingRequestsRef := <span class="fn"><span class="fn">fw</span>.pendingRequestsRef</span>, groupedEditsRef := <span class="fn"><span class="fn">fw</span>.groupedEditsRef</span> }</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a>
      (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspRequest">IO.FS.Stream.writeLspRequest</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.stdin">Lean.Server.Watchdog.FileWorker.stdin</a> <span class="fn">fw</span></span>)
        <span class="fn">{ id := <span class="fn">0</span>, method := <span class="fn">"initialize"</span>, param := <span class="fn"><span class="fn">st</span>.initParams</span> }</span></span>)</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a>
      (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspNotification">IO.FS.Stream.writeLspNotification</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.stdin">Lean.Server.Watchdog.FileWorker.stdin</a> <span class="fn">fw</span></span>)
        <span class="fn">{ method := <span class="fn">"textDocument/didOpen"</span>,
          param :=
            <span class="fn">{ textDocument := <span class="fn">{ uri := <span class="fn"><span class="fn">m</span>.uri</span>, languageId := <span class="fn">"lean"</span>, version := <span class="fn"><span class="fn">m</span>.version</span>, text := <span class="fn"><span class="fn"><span class="fn">m</span>.text</span>.source</span> }</span> }</span> }</span></span>)</span>
  <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.updateFileWorkers">Lean.Server.Watchdog.updateFileWorkers</a> <span class="fn">fw</span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.terminateFileWorker">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L304-L316">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.terminateFileWorker">Lean.Server.Watchdog.terminateFileWorker</a>
</span>
<span class="decl_args">
<span class="fn">(uri : <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.DocumentUri">Lean.Lsp.DocumentUri</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.terminateFileWorker">Lean.Server.Watchdog.terminateFileWorker</a> <span class="fn">uri</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let fw ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findFileWorker!">Lean.Server.Watchdog.findFileWorker!</a> <span class="fn">uri</span></span>
  let r ←
    <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#MonadExcept.tryCatch">tryCatch</a>
        (<span class="fn">do
          let y ←
            <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a>
                (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspMessage">IO.FS.Stream.writeLspMessage</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.stdin">Lean.Server.Watchdog.FileWorker.stdin</a> <span class="fn">fw</span></span>)
                  (<span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message.notification">Lean.JsonRpc.Message.notification</a> <span class="fn">"exit"</span> <span class="fn">none</span></span>)</span>)</span>
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#DoResultPR.pure">DoResultPR.pure</a> <span class="fn">y</span> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span>)
        <span class="fn">fun <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#DoResultPR.return">DoResultPR.return</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span></span>
  let _do_jp : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a> → <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></span> := <span class="fn">fun <span class="fn">y</span> => <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.eraseFileWorker">Lean.Server.Watchdog.eraseFileWorker</a> <span class="fn">uri</span></span></span>
  <span class="fn">match <span class="fn">r</span> with
    | <span class="fn"><a href="/Unicode.lean/Init/Core.html#DoResultPR.return">DoResultPR.pure</a> <span class="fn">a</span> <span class="fn">u</span></span> =>
      <span class="fn">let x := <span class="fn">u</span>;
      <span class="fn">do
      let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">a</span></span>
      <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span></span>
    | <span class="fn"><a href="/Unicode.lean/Init/Core.html#DoResultPR.return">DoResultPR.return</a> <span class="fn">b</span> <span class="fn">u</span></span> =>
      <span class="fn">let x := <span class="fn">u</span>;
      <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">b</span></span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleCrash">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L318-L319">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleCrash">Lean.Server.Watchdog.handleCrash</a>
</span>
<span class="decl_args">
<span class="fn">(uri : <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.DocumentUri">Lean.Lsp.DocumentUri</a>)</span></span>
<span class="decl_args">
<span class="fn">(queuedMsgs : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a></span>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleCrash">Lean.Server.Watchdog.handleCrash</a> <span class="fn">uri</span> <span class="fn">queuedMsgs</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let a ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findFileWorker!">Lean.Server.Watchdog.findFileWorker!</a> <span class="fn">uri</span></span>
  <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.updateFileWorkers">Lean.Server.Watchdog.updateFileWorkers</a>
      <span class="fn">{ doc := <span class="fn"><span class="fn">a</span>.doc</span>, proc := <span class="fn"><span class="fn">a</span>.proc</span>, commTask := <span class="fn"><span class="fn">a</span>.commTask</span>,
        state := <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerState.crashed">Lean.Server.Watchdog.WorkerState.crashed</a> <span class="fn">queuedMsgs</span></span>, pendingRequestsRef := <span class="fn"><span class="fn">a</span>.pendingRequestsRef</span>,
        groupedEditsRef := <span class="fn"><span class="fn">a</span>.groupedEditsRef</span> }</span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.tryWriteMessage">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L326-L366">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.tryWriteMessage">Lean.Server.Watchdog.tryWriteMessage</a>
</span>
<span class="decl_args">
<span class="fn">(uri : <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.DocumentUri">Lean.Lsp.DocumentUri</a>)</span></span>
<span class="decl_args">
<span class="fn">(msg : <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a>)</span></span>
<span class="decl_args">
<span class="fn">(queueFailedMessage : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#optParam">optParam</a> <a href="/Unicode.lean/Init/Prelude.html#Bool">Bool</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(restartCrashedWorker : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#optParam">optParam</a> <a href="/Unicode.lean/Init/Prelude.html#Bool">Bool</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.tryWriteMessage">Lean.Server.Watchdog.tryWriteMessage</a> <span class="fn">uri</span> <span class="fn">msg</span> <span class="fn">queueFailedMessage</span> <span class="fn">restartCrashedWorker</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let discr ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findFileWorker?">Lean.Server.Watchdog.findFileWorker?</a> <span class="fn">uri</span></span>
  <span class="fn">match <span class="fn">discr</span> with
    | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">fw</span></span> => <span class="fn">do
      let pendingEdit ←
        <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modifyGet">ST.Ref.modifyGet</a> <span class="fn"><span class="fn">fw</span>.groupedEditsRef</span> <span class="fn">fun <span class="fn">x</span> =>
            <span class="fn">match <span class="fn">x</span> with
            | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">ge</span></span> =>
              <span class="fn">(<a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>,
                <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a>
                  <span class="fn">{ applyTime := <span class="fn"><span class="fn">ge</span>.applyTime</span>, params := <span class="fn"><span class="fn">ge</span>.params</span>, signalTask := <span class="fn"><span class="fn">ge</span>.signalTask</span>,
                    queuedMsgs := <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array.push">Array.push</a> <span class="fn"><span class="fn">ge</span>.queuedMsgs</span> <span class="fn">msg</span></span> }</span></span>)</span>
            | <span class="fn">none</span> => <span class="fn">(<a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a>, <span class="fn">none</span>)</span></span></span></span>
      let _do_jp : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#PUnit">PUnit</a> → <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></span> := <span class="fn">fun <span class="fn">y</span> =>
        <span class="fn">match <span class="fn"><span class="fn">fw</span>.state</span> with
        | <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerState.running"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerState.crashed">Lean.Server.Watchdog.WorkerState.crashed</a> <span class="fn">queuedMsgs</span></a> =>
          <span class="fn">let queuedMsgs := <span class="fn">queuedMsgs</span>;
          <span class="fn">let _do_jp := <span class="fn">fun <span class="fn">queuedMsgs</span> <span class="fn">y</span> =>
            <span class="fn">let _do_jp := <span class="fn">fun <span class="fn">y</span> => <span class="fn">do
              <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.eraseFileWorker">Lean.Server.Watchdog.eraseFileWorker</a> <span class="fn">uri</span></span>
              <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.startFileWorker">Lean.Server.Watchdog.startFileWorker</a> <span class="fn"><span class="fn"><span class="fn">fw</span>.doc</span>.meta</span></span>
              let newFw ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findFileWorker!">Lean.Server.Watchdog.findFileWorker!</a> <span class="fn">uri</span></span>
              let crashedMsgs : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a></span> := <span class="fn">#[]</span>
              let r ←
                <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">queuedMsgs</span> <span class="fn">crashedMsgs</span> <span class="fn">fun <span class="fn">msg</span> <span class="fn">r</span> =>
                    <span class="fn">let crashedMsgs := <span class="fn">r</span>;
                    <span class="fn">do
                    let r ←
                      <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#MonadExcept.tryCatch">tryCatch</a>
                          (<span class="fn">do
                            let y ←
                              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspMessage">IO.FS.Stream.writeLspMessage</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.stdin">Lean.Server.Watchdog.FileWorker.stdin</a> <span class="fn">newFw</span></span>) <span class="fn">msg</span></span>)</span>
                            <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">{ fst := <span class="fn">y</span>, snd := <span class="fn">crashedMsgs</span> }</span></span></span>)
                          <span class="fn">fun <span class="fn">x</span> =>
                          <span class="fn">let crashedMsgs := <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array.push">Array.push</a> <span class="fn">crashedMsgs</span> <span class="fn">msg</span></span>;
                          <span class="fn">do
                          let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
                          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">{ fst := <span class="fn">y</span>, snd := <span class="fn">crashedMsgs</span> }</span></span></span></span></span></span>
                    let x : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a></span> := <span class="fn"><span class="fn">r</span>.snd</span>
                    let crashedMsgs : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a></span> := <span class="fn">x</span>
                    <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">r</span>.fst</span></span>
                    <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <span class="fn">crashedMsgs</span></span>)</span></span></span></span></span>
              let x : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a></span> := <span class="fn">r</span>
              let crashedMsgs : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a></span> := <span class="fn">x</span>
              <span class="fn">if <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Not">¬</a><span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/Array/Basic.html#Array.isEmpty">Array.isEmpty</a> <span class="fn">crashedMsgs</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span></span> then <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleCrash">Lean.Server.Watchdog.handleCrash</a> <span class="fn">uri</span> <span class="fn">crashedMsgs</span></span>
                else <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></span>;
            <span class="fn">if <span class="fn">(<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#not">!</a><span class="fn">restartCrashedWorker</span></span>) <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
            else <span class="fn">do
              let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
              <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span></span></span></span>;
          <span class="fn">if <span class="fn"><span class="fn">queueFailedMessage</span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then
            <span class="fn">let queuedMsgs := <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array.push">Array.push</a> <span class="fn">queuedMsgs</span> <span class="fn">msg</span></span>;
            <span class="fn">do
            let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
            <span class="fn"><span class="fn">_do_jp</span> <span class="fn">queuedMsgs</span> <span class="fn">y</span></span></span></span>
          else <span class="fn">do
            let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
            <span class="fn"><span class="fn">_do_jp</span> <span class="fn">queuedMsgs</span> <span class="fn">y</span></span></span></span></span></span>
        | <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerState.running">Lean.Server.Watchdog.WorkerState.running</a> =>
          <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerState.running">let initialQueuedMsgs := <span class="fn">if <span class="fn"><span class="fn">queueFailedMessage</span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">#[<span class="fn">msg</span>]</span> else <span class="fn">#[]</span></span>;
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#MonadExcept.tryCatch">tryCatch</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspMessage">IO.FS.Stream.writeLspMessage</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker.stdin">Lean.Server.Watchdog.FileWorker.stdin</a> <span class="fn">fw</span></span>) <span class="fn">msg</span></span>)</span>) <span class="fn">fun <span class="fn">x</span> =>
            <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleCrash">Lean.Server.Watchdog.handleCrash</a> <span class="fn">uri</span> <span class="fn">initialQueuedMsgs</span></span></span></span></a></span></span>
      <span class="fn">if <span class="fn"><span class="fn">pendingEdit</span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
        else <span class="fn">do
          let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
          <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span></span></span>
    | <span class="fn">x</span> => <span class="fn">do
      let <span class="fn">a</span> ← <span class="fn">read</span>
      <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a>
          (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream.putStrLn">IO.FS.Stream.putStrLn</a> <span class="fn"><span class="fn">a</span>.hLog</span>
            (<span class="fn"><span class="fn"><span class="fn"><span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"Cannot send message to unknown document '"</span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">uri</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"':\n"</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a>                 <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/Printer.html#Lean.Json.compress">Lean.Json.compress</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.ToJson.toJson">Lean.toJson</a> <span class="fn">msg</span></span>)</span>)</span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a>               <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">""</span></span></span>)</span>)</span>
      <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></span></span></li>
</ul>
</details>
<p>Tries to write a message, sets the state of the FileWorker to <code>crashed</code> if it does not succeed
and restarts the file worker if the <code>crashed</code> flag was already set. Just logs an error if there
is no FileWorker at this <code>uri</code>.
Messages that couldn't be sent can be queued up via the queueFailedMessage flag and
will be discharged after the FileWorker is restarted.</p></div>
</div>
<div class="decl" id="Lean.Server.Watchdog.findDefinitions">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L371-L380">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findDefinitions">Lean.Server.Watchdog.findDefinitions</a>
</span>
<span class="decl_args">
<span class="fn">(p : <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.TextDocumentPositionParams">Lean.Lsp.TextDocumentPositionParams</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.Location">Lean.Lsp.Location</a></span>)</span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findDefinitions">Lean.Server.Watchdog.findDefinitions</a> <span class="fn">p</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn">let definitions := <span class="fn">#[]</span>;
  <span class="fn">let _do_jp := <span class="fn">fun <span class="fn">definitions</span> <span class="fn">y</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">definitions</span></span></span>;
  <span class="fn">match <span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Lsp.DocumentUri.toPath?">Lean.Lsp.DocumentUri.toPath?</a> <span class="fn"><span class="fn"><span class="fn">p</span>.textDocument</span>.uri</span></span> with
  | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">path</span></span> => <span class="fn">do
    let a ← <span class="fn">read</span>
    let srcSearchPath : <a href="/Unicode.lean/Init/System/FilePath.html#System.SearchPath">System.SearchPath</a> := <span class="fn"><span class="fn">a</span>.srcSearchPath</span>
    let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Util/Path.html#Lean.searchModuleNameOfFileName">Lean.searchModuleNameOfFileName</a> <span class="fn">path</span> <span class="fn">srcSearchPath</span></span>)</span>
    <span class="fn">match <span class="fn">a</span> with
      | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">module</span></span> => <span class="fn">do
        let a ← <span class="fn">read</span>
        let references ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.get">ST.Ref.get</a> <span class="fn"><span class="fn">a</span>.references</span></span>
        let r ←
          <span class="fn">let col := <span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.findAt">Lean.Server.References.findAt</a> <span class="fn">references</span> <span class="fn">module</span> <span class="fn"><span class="fn">p</span>.position</span></span>;
            <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">col</span> <span class="fn">definitions</span> <span class="fn">fun <span class="fn">ident</span> <span class="fn">r</span> =>
              <span class="fn">let definitions := <span class="fn">r</span>;
              <span class="fn">do
              let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.definitionOf?">Lean.Server.References.definitionOf?</a> <span class="fn">references</span> <span class="fn">ident</span> <span class="fn">srcSearchPath</span></span>)</span>
              <span class="fn">match <span class="fn">a</span> with
                | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">definition</span></span> =>
                  <span class="fn">let definitions := <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array.push">Array.push</a> <span class="fn">definitions</span> <span class="fn">definition</span></span>;
                  <span class="fn">do
                  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
                  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <span class="fn">definitions</span></span>)</span></span></span>
                | <span class="fn">x</span> => <span class="fn">do
                  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
                  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <span class="fn">definitions</span></span>)</span></span></span></span></span></span></span></span>
        let x : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.Location">Lean.Lsp.Location</a></span> := <span class="fn">r</span>
        let definitions : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.Location">Lean.Lsp.Location</a></span> := <span class="fn">x</span>
        let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
        <span class="fn"><span class="fn">_do_jp</span> <span class="fn">definitions</span> <span class="fn">y</span></span></span>
      | <span class="fn">x</span> => <span class="fn">do
        let <span class="fn">y</span> ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
        <span class="fn"><span class="fn">_do_jp</span> <span class="fn">definitions</span> <span class="fn">y</span></span></span></span></span>
  | <span class="fn">x</span> => <span class="fn">do
    let <span class="fn">y</span> ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
    <span class="fn"><span class="fn">_do_jp</span> <span class="fn">definitions</span> <span class="fn">y</span></span></span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleReference">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L382-L391">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleReference">Lean.Server.Watchdog.handleReference</a>
</span>
<span class="decl_args">
<span class="fn">(p : <a href="/Unicode.lean/Lean/Data/Lsp/LanguageFeatures.html#Lean.Lsp.ReferenceParams">Lean.Lsp.ReferenceParams</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.Location">Lean.Lsp.Location</a></span>)</span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleReference">Lean.Server.Watchdog.handleReference</a> <span class="fn">p</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn">let result := <span class="fn">#[]</span>;
  <span class="fn">let _do_jp := <span class="fn">fun <span class="fn">result</span> <span class="fn">y</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">result</span></span></span>;
  <span class="fn">match <span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Lsp.DocumentUri.toPath?">Lean.Lsp.DocumentUri.toPath?</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">p</span>.toTextDocumentPositionParams</span>.textDocument</span>.uri</span></span> with
  | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">path</span></span> => <span class="fn">do
    let a ← <span class="fn">read</span>
    let srcSearchPath : <a href="/Unicode.lean/Init/System/FilePath.html#System.SearchPath">System.SearchPath</a> := <span class="fn"><span class="fn">a</span>.srcSearchPath</span>
    let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Util/Path.html#Lean.searchModuleNameOfFileName">Lean.searchModuleNameOfFileName</a> <span class="fn">path</span> <span class="fn">srcSearchPath</span></span>)</span>
    <span class="fn">match <span class="fn">a</span> with
      | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">module</span></span> => <span class="fn">do
        let a ← <span class="fn">read</span>
        let references ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.get">ST.Ref.get</a> <span class="fn"><span class="fn">a</span>.references</span></span>
        let r ←
          <span class="fn">let col := <span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.findAt">Lean.Server.References.findAt</a> <span class="fn">references</span> <span class="fn">module</span> <span class="fn"><span class="fn"><span class="fn">p</span>.toTextDocumentPositionParams</span>.position</span></span>;
            <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">col</span> <span class="fn">result</span> <span class="fn">fun <span class="fn">ident</span> <span class="fn">r</span> =>
              <span class="fn">let result := <span class="fn">r</span>;
              <span class="fn">do
              let identRefs ←
                <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.referringTo">Lean.Server.References.referringTo</a> <span class="fn">references</span> <span class="fn">ident</span> <span class="fn">srcSearchPath</span> <span class="fn"><span class="fn"><span class="fn">p</span>.context</span>.includeDeclaration</span></span>)</span>
              let result : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.Location">Lean.Lsp.Location</a></span> := <span class="fn"><a href="/Unicode.lean/Init/Data/Array/Basic.html#Array.append">Array.append</a> <span class="fn">result</span> <span class="fn">identRefs</span></span>
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <span class="fn">result</span></span>)</span></span></span></span></span></span>
        let x : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.Location">Lean.Lsp.Location</a></span> := <span class="fn">r</span>
        let result : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.Location">Lean.Lsp.Location</a></span> := <span class="fn">x</span>
        let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
        <span class="fn"><span class="fn">_do_jp</span> <span class="fn">result</span> <span class="fn">y</span></span></span>
      | <span class="fn">x</span> => <span class="fn">do
        let <span class="fn">y</span> ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
        <span class="fn"><span class="fn">_do_jp</span> <span class="fn">result</span> <span class="fn">y</span></span></span></span></span>
  | <span class="fn">x</span> => <span class="fn">do
    let <span class="fn">y</span> ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
    <span class="fn"><span class="fn">_do_jp</span> <span class="fn">result</span> <span class="fn">y</span></span></span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleWorkspaceSymbol">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L394-L427">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleWorkspaceSymbol">Lean.Server.Watchdog.handleWorkspaceSymbol</a>
</span>
<span class="decl_args">
<span class="fn">(p : <a href="/Unicode.lean/Lean/Data/Lsp/LanguageFeatures.html#Lean.Lsp.WorkspaceSymbolParams">Lean.Lsp.WorkspaceSymbolParams</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/Lsp/LanguageFeatures.html#Lean.Lsp.SymbolInformation">Lean.Lsp.SymbolInformation</a></span>)</span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleWorkspaceSymbol">Lean.Server.Watchdog.handleWorkspaceSymbol</a> <span class="fn">p</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let a ← <span class="fn">read</span>
  let references ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.get">ST.Ref.get</a> <span class="fn"><span class="fn">a</span>.references</span></span>
  let a ← <span class="fn">read</span>
  let srcSearchPath : <a href="/Unicode.lean/Init/System/FilePath.html#System.SearchPath">System.SearchPath</a> := <span class="fn"><span class="fn">a</span>.srcSearchPath</span>
  let symbols ←
    <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a>
        (<span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.definitionsMatching">Lean.Server.References.definitionsMatching</a> <span class="fn">references</span> <span class="fn">srcSearchPath</span>
          (<span class="fn">fun <span class="fn">name</span> =>
            <span class="fn">let name := <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.getD">Option.getD</a> (<span class="fn"><a href="/Unicode.lean/Lean/Modifiers.html#Lean.privateToUserName?">Lean.privateToUserName?</a> <span class="fn">name</span></span>) <span class="fn">name</span></span>;
            <span class="fn">if
                <span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleWorkspaceSymbol.containsCaseInsensitive">Lean.Server.Watchdog.handleWorkspaceSymbol.containsCaseInsensitive</a> <span class="fn"><span class="fn">p</span>.query</span> (<span class="fn"><a href="/Unicode.lean/Init/Meta.html#Lean.Name.toString">Lean.Name.toString</a> <span class="fn">name</span></span>)</span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>                   <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> (<span class="fn"><a href="/Unicode.lean/Init/Meta.html#Lean.Name.toString">Lean.Name.toString</a> <span class="fn">name</span></span>)</span>
            else <span class="fn">none</span></span></span></span>)
          (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">100</span></span>)</span>)</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a>
      (<span class="fn"><a href="/Unicode.lean/Init/Data/Array/Basic.html#Array.map">Array.map</a>
        (<span class="fn">fun <span class="fn">x</span> =>
          <span class="fn">match <span class="fn">x</span> with
          | <span class="fn">(<span class="fn">name</span>, <span class="fn">location</span>)</span> =>
            <span class="fn">{ name := <span class="fn">name</span>, kind := <a href="/Unicode.lean/Lean/Data/Lsp/LanguageFeatures.html#Lean.Lsp.SymbolKind.constant">Lean.Lsp.SymbolKind.constant</a>, tags := <span class="fn">#[]</span>, location := <span class="fn">location</span>,
              containerName? := <span class="fn">none</span> }</span></span></span>)
        <span class="fn">symbols</span></span>)</span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleWorkspaceSymbol.containsCaseInsensitive">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L408-L414">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleWorkspaceSymbol.containsCaseInsensitive">Lean.Server.Watchdog.handleWorkspaceSymbol.containsCaseInsensitive</a>
</span>
<span class="decl_args">
<span class="fn">(value : <a href="/Unicode.lean/Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Init/Prelude.html#String">String</a> → <a href="/Unicode.lean/Init/Prelude.html#Bool">Bool</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleWorkspaceSymbol.containsCaseInsensitive">Lean.Server.Watchdog.handleWorkspaceSymbol.containsCaseInsensitive</a> <span class="fn">value</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn">(<span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.any">String.any</a> <span class="fn">value</span> <span class="fn">fun <span class="fn">a</span> => <span class="fn"><a href="/Unicode.lean/Init/Data/Char/Basic.html#Char.isUpper">Char.isUpper</a> <span class="fn">a</span></span></span></span>) <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then
    <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder">Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder</a> <span class="fn">value</span></span>
  else
    <span class="fn">let value := <span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.toLower">String.toLower</a> <span class="fn">value</span></span>;
    <span class="fn">fun <span class="fn">target</span> => <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder">Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder</a> <span class="fn">value</span> (<span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.toLower">String.toLower</a> <span class="fn">target</span></span>)</span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L416-L427">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder">Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder</a>
</span>
<span class="decl_args">
<span class="fn">(value : <a href="/Unicode.lean/Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(target : <a href="/Unicode.lean/Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><a href="/Unicode.lean/Init/Prelude.html#Bool">Bool</a></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder">Lean.Server.Watchdog.handleWorkspaceSymbol.containsInOrder</a> <span class="fn">value</span> <span class="fn">target</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="/Unicode.lean/Init/Control/Id.html#Id.run">Id.run</a>
    (<span class="fn">let _do_jp := <span class="fn">fun <span class="fn">y</span> =>
      <span class="fn">let valueIt := <span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.mkIterator">String.mkIterator</a> <span class="fn">value</span></span>;
      <span class="fn">let targetIt := <span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.mkIterator">String.mkIterator</a> <span class="fn">target</span></span>;
      <span class="fn">do
      let r ←
        <span class="fn">let col := <span class="fn">{ start := <span class="fn">0</span>, stop := <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#String.bsize">String.bsize</a> <span class="fn">target</span></span>, step := <span class="fn">1</span> }</span>;
          <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">col</span> <span class="fn">{ fst := <span class="fn">none</span>, snd := <span class="fn">{ fst := <span class="fn">targetIt</span>, snd := <span class="fn">valueIt</span> }</span> }</span> <span class="fn">fun <span class="fn">x</span> <span class="fn">r</span> =>
            <span class="fn">let r := <span class="fn"><span class="fn">r</span>.snd</span>;
            <span class="fn">let targetIt := <span class="fn"><span class="fn">r</span>.fst</span>;
            <span class="fn">let valueIt := <span class="fn"><span class="fn">r</span>.snd</span>;
            <span class="fn">let _do_jp := <span class="fn">fun <span class="fn">targetIt</span> <span class="fn">valueIt</span> <span class="fn">y</span> =>
              <span class="fn">let targetIt := <span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.Iterator.next">String.Iterator.next</a> <span class="fn">targetIt</span></span>;
              <span class="fn">do
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <span class="fn">{ fst := <span class="fn">none</span>, snd := <span class="fn">{ fst := <span class="fn">targetIt</span>, snd := <span class="fn">valueIt</span> }</span> }</span></span>)</span></span></span></span>;
            <span class="fn">if <span class="fn">(<span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.Iterator.curr">String.Iterator.curr</a> <span class="fn">valueIt</span></span> <a href="/Unicode.lean/Init/Prelude.html#BEq.beq">==</a> <span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.Iterator.curr">String.Iterator.curr</a> <span class="fn">targetIt</span></span></span>) <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then
              <span class="fn">let valueIt := <span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.Iterator.next">String.Iterator.next</a> <span class="fn">valueIt</span></span>;
              <span class="fn">if <span class="fn">(<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#not">!</a><span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.Iterator.hasNext">String.Iterator.hasNext</a> <span class="fn">valueIt</span></span></span>) <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then
                <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.done">ForInStep.done</a> <span class="fn">{ fst := <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span>, snd := <span class="fn">{ fst := <span class="fn">targetIt</span>, snd := <span class="fn">valueIt</span> }</span> }</span></span>)</span>
              else <span class="fn">do
                let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
                <span class="fn"><span class="fn">_do_jp</span> <span class="fn">targetIt</span> <span class="fn">valueIt</span> <span class="fn">y</span></span></span></span></span>
            else <span class="fn">do
              let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
              <span class="fn"><span class="fn">_do_jp</span> <span class="fn">targetIt</span> <span class="fn">valueIt</span> <span class="fn">y</span></span></span></span></span></span></span></span></span></span></span>
      let x : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#MProd">MProd</a> <a href="/Unicode.lean/Init/Data/String/Basic.html#String.Iterator">String.Iterator</a> <a href="/Unicode.lean/Init/Data/String/Basic.html#String.Iterator">String.Iterator</a></span> := <span class="fn"><span class="fn">r</span>.snd</span>
      <span class="fn">match <span class="fn">x</span> with
        | <span class="fn">{ fst := <span class="fn">targetIt</span>, snd := <span class="fn">valueIt</span> }</span> =>
          <span class="fn">let _do_jp := <span class="fn">fun <span class="fn">y</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a></span></span>;
          <span class="fn">match <span class="fn"><span class="fn">r</span>.fst</span> with
          | <span class="fn">none</span> => <span class="fn">do
            let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
            <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span>
          | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">a</span></span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">a</span></span></span></span></span></span></span></span></span>;
    <span class="fn">if <span class="fn">(<span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.length">String.length</a> <span class="fn">value</span></span> <a href="/Unicode.lean/Init/Prelude.html#BEq.beq">==</a> <span class="fn">0</span></span>) <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span>
    else <span class="fn">do
      let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
      <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span></span></span>)</span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleDidOpen">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L432-L439">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleDidOpen">Lean.Server.Watchdog.handleDidOpen</a>
</span>
<span class="decl_args">
<span class="fn">(p : <a href="/Unicode.lean/Lean/Data/Lsp/TextSync.html#Lean.Lsp.DidOpenTextDocumentParams">Lean.Lsp.DidOpenTextDocumentParams</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleDidOpen">Lean.Server.Watchdog.handleDidOpen</a> <span class="fn">p</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn">let doc := <span class="fn"><span class="fn">p</span>.textDocument</span>;
  <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.startFileWorker">Lean.Server.Watchdog.startFileWorker</a> <span class="fn">{ uri := <span class="fn"><span class="fn">doc</span>.uri</span>, version := <span class="fn"><span class="fn">doc</span>.version</span>, text := <span class="fn"><a href="/Unicode.lean/Lean/Data/Position.html#String.toFileMap">String.toFileMap</a> <span class="fn"><span class="fn">doc</span>.text</span></span> }</span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleEdits">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L441-L464">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleEdits">Lean.Server.Watchdog.handleEdits</a>
</span>
<span class="decl_args">
<span class="fn">(fw : <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleEdits">Lean.Server.Watchdog.handleEdits</a> <span class="fn">fw</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let discr ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modifyGet">ST.Ref.modifyGet</a> <span class="fn"><span class="fn">fw</span>.groupedEditsRef</span> <span class="fn">fun <span class="fn">a</span> => <span class="fn">(<span class="fn">a</span>, <span class="fn">none</span>)</span></span></span>
  <span class="fn">match <span class="fn">discr</span> with
    | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">ge</span></span> =>
      <span class="fn">let doc := <span class="fn"><span class="fn"><span class="fn">ge</span>.params</span>.textDocument</span>;
      <span class="fn">let changes := <span class="fn"><span class="fn"><span class="fn">ge</span>.params</span>.contentChanges</span>;
      <span class="fn">let oldDoc := <span class="fn"><span class="fn">fw</span>.doc</span>;
      <span class="fn">do
      let discr ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">doc</span>.version?</span></span>
      <span class="fn">match <span class="fn">discr</span> with
        | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">newVersion</span></span> =>
          <span class="fn">let _do_jp := <span class="fn">fun <span class="fn">y</span> =>
            <span class="fn">let _do_jp := <span class="fn">fun <span class="fn">y</span> =>
              <span class="fn">let newDocText := <span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Server.foldDocumentChanges">Lean.Server.foldDocumentChanges</a> <span class="fn">changes</span> <span class="fn"><span class="fn"><span class="fn">oldDoc</span>.meta</span>.text</span></span>;
              <span class="fn">let newMeta := <span class="fn">{ uri := <span class="fn"><span class="fn">doc</span>.uri</span>, version := <span class="fn">newVersion</span>, text := <span class="fn">newDocText</span> }</span>;
              <span class="fn">do
              let newHeaderAst ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#_private.Lean.Server.Watchdog.0.Lean.Server.Watchdog.parseHeaderAst">Lean.Server.Watchdog.parseHeaderAst</a> <span class="fn"><span class="fn">newDocText</span>.source</span></span>)</span>
              <span class="fn">if <span class="fn">(<span class="fn"><span class="fn">newHeaderAst</span> <a href="/Unicode.lean/Init/Core.html#bne">!=</a> <span class="fn"><span class="fn">oldDoc</span>.headerAst</span></span>) <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">do
                  <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.terminateFileWorker">Lean.Server.Watchdog.terminateFileWorker</a> <span class="fn"><span class="fn">doc</span>.uri</span></span>
                  <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.startFileWorker">Lean.Server.Watchdog.startFileWorker</a> <span class="fn">newMeta</span></span></span>
                else
                  <span class="fn">let newDoc := <span class="fn">{ meta := <span class="fn">newMeta</span>, headerAst := <span class="fn"><span class="fn">oldDoc</span>.headerAst</span> }</span>;
                  <span class="fn">do
                  <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.updateFileWorkers">Lean.Server.Watchdog.updateFileWorkers</a>
                      <span class="fn">{ doc := <span class="fn">newDoc</span>, proc := <span class="fn"><span class="fn">fw</span>.proc</span>, commTask := <span class="fn"><span class="fn">fw</span>.commTask</span>, state := <span class="fn"><span class="fn">fw</span>.state</span>,
                        pendingRequestsRef := <span class="fn"><span class="fn">fw</span>.pendingRequestsRef</span>, groupedEditsRef := <span class="fn"><span class="fn">fw</span>.groupedEditsRef</span> }</span></span>
                  <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.tryWriteMessage">Lean.Server.Watchdog.tryWriteMessage</a> <span class="fn"><span class="fn">doc</span>.uri</span>
                      (<span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message.notification">Lean.JsonRpc.Message.notification</a>
                        <span class="fn"><span class="fn">{ method := <span class="fn">"textDocument/didChange"</span>, param := <span class="fn"><span class="fn">ge</span>.params</span> }</span>.method</span>
                        (<span class="fn"><a href="/Unicode.lean/Init/Control/Except.html#Except.toOption">Except.toOption</a>
                          (<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.Json.toStructured?">Lean.Json.toStructured?</a> <span class="fn"><span class="fn">{ method := <span class="fn">"textDocument/didChange"</span>, param := <span class="fn"><span class="fn">ge</span>.params</span> }</span>.param</span></span>)</span>)</span>)
                      <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span>
                  let r ←
                    <span class="fn">let col := <span class="fn"><span class="fn">ge</span>.queuedMsgs</span>;
                      <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">col</span> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">fun <span class="fn">msg</span> <span class="fn">r</span> => <span class="fn">do
                        <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.tryWriteMessage">Lean.Server.Watchdog.tryWriteMessage</a> <span class="fn"><span class="fn">doc</span>.uri</span> <span class="fn">msg</span> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a></span>
                        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span></span></span></span>
                  let x : <a href="/Unicode.lean/Init/Prelude.html#PUnit">PUnit</a> := <span class="fn">r</span>
                  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></span></span></span></span></span>;
            <span class="fn">if <span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/Array/Basic.html#Array.isEmpty">Array.isEmpty</a> <span class="fn">changes</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
            else <span class="fn">do
              let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
              <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span></span></span></span>;
          <span class="fn">if <span class="fn"><span class="fn">newVersion</span> <a href="/Unicode.lean/Init/Prelude.html#LE.le">≤</a> <span class="fn"><span class="fn"><span class="fn">oldDoc</span>.meta</span>.version</span></span> then <span class="fn">do
            let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#IO.throwServerError">IO.throwServerError</a> <span class="fn">"Got outdated version number"</span></span>)</span>
            <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span>
          else <span class="fn">do
            let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
            <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span></span></span>
        | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#IO.throwServerError">IO.throwServerError</a> <span class="fn">"Expected version number"</span></span>)</span></span></span></span></span></span>
    | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#IO.throwServerError">IO.throwServerError</a> <span class="fn">"Internal error: empty grouped edits reference"</span></span>)</span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleDidClose">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L466-L467">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleDidClose">Lean.Server.Watchdog.handleDidClose</a>
</span>
<span class="decl_args">
<span class="fn">(p : <a href="/Unicode.lean/Lean/Data/Lsp/TextSync.html#Lean.Lsp.DidCloseTextDocumentParams">Lean.Lsp.DidCloseTextDocumentParams</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleDidClose">Lean.Server.Watchdog.handleDidClose</a> <span class="fn">p</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.terminateFileWorker">Lean.Server.Watchdog.terminateFileWorker</a> <span class="fn"><span class="fn"><span class="fn">p</span>.textDocument</span>.uri</span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleDidChangeWatchedFiles">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L469-L482">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleDidChangeWatchedFiles">Lean.Server.Watchdog.handleDidChangeWatchedFiles</a>
</span>
<span class="decl_args">
<span class="fn">(p : <a href="/Unicode.lean/Lean/Data/Lsp/Workspace.html#Lean.Lsp.DidChangeWatchedFilesParams">Lean.Lsp.DidChangeWatchedFilesParams</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleDidChangeWatchedFiles">Lean.Server.Watchdog.handleDidChangeWatchedFiles</a> <span class="fn">p</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let a ← <span class="fn">read</span>
  let references : <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.Ref">IO.Ref</a> <a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References">Lean.Server.References</a></span> := <span class="fn"><span class="fn">a</span>.references</span>
  let oleanSearchPath ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.get">ST.Ref.get</a> <a href="/Unicode.lean/Lean/Util/Path.html#Lean.searchPathRef">Lean.searchPathRef</a></span>
  let ileans ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Util/Path.html#Lean.SearchPath.findAllWithExt">Lean.SearchPath.findAllWithExt</a> <span class="fn">oleanSearchPath</span> <span class="fn">"ilean"</span></span>)</span>
  let r ←
    <span class="fn">let col := <span class="fn"><span class="fn">p</span>.changes</span>;
      <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">col</span> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">fun <span class="fn">change</span> <span class="fn">r</span> =>
        <span class="fn">match <span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Lsp.DocumentUri.toPath?">Lean.Lsp.DocumentUri.toPath?</a> <span class="fn"><span class="fn">change</span>.uri</span></span> with
        | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">path</span></span> =>
          <span class="fn">match <span class="fn"><span class="fn">change</span>.type</span> with
          | <span class="fn">Lean.Lsp.FileChangeType.Deleted</span> => <span class="fn">do
            <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <span class="fn">references</span> <span class="fn">fun <span class="fn">r</span> => <span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.removeIlean">Lean.Server.References.removeIlean</a> <span class="fn">r</span> <span class="fn">path</span></span></span></span>
            <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span>
          | <span class="fn">x</span> =>
            <span class="fn">if <span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/Array/Basic.html#Array.contains">Array.contains</a> <span class="fn">ileans</span> <span class="fn">path</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">do
              let ilean ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.Ilean.load">Lean.Server.Ilean.load</a> <span class="fn">path</span></span>)</span>
              <span class="fn">match <span class="fn"><span class="fn">change</span>.type</span> with
                | <span class="fn">Lean.Lsp.FileChangeType.Changed</span> => <span class="fn">do
                  <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <span class="fn">references</span> <span class="fn">fun <span class="fn">r</span> =>
                      <span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.addIlean">Lean.Server.References.addIlean</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.removeIlean">Lean.Server.References.removeIlean</a> <span class="fn">r</span> <span class="fn">path</span></span>) <span class="fn">path</span> <span class="fn">ilean</span></span></span></span>
                  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span>
                | <span class="fn">x</span> => <span class="fn">do
                  <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <span class="fn">references</span> <span class="fn">fun <span class="fn">r</span> => <span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.addIlean">Lean.Server.References.addIlean</a> <span class="fn">r</span> <span class="fn">path</span> <span class="fn">ilean</span></span></span></span>
                  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span></span></span>
            else <span class="fn">do
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span></span></span>
        | <span class="fn">x</span> => <span class="fn">do
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span></span></span></span></span>
  let x : <a href="/Unicode.lean/Init/Prelude.html#PUnit">PUnit</a> := <span class="fn">r</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleCancelRequest">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L484-L490">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleCancelRequest">Lean.Server.Watchdog.handleCancelRequest</a>
</span>
<span class="decl_args">
<span class="fn">(p : <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.CancelParams">Lean.Lsp.CancelParams</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleCancelRequest">Lean.Server.Watchdog.handleCancelRequest</a> <span class="fn">p</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let a ← <span class="fn">read</span>
  let fileWorkers ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.get">ST.Ref.get</a> <span class="fn"><span class="fn">a</span>.fileWorkersRef</span></span>
  let r ←
    <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">fileWorkers</span> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">fun <span class="fn">x</span> <span class="fn">r</span> =>
        <span class="fn">match <span class="fn">x</span> with
        | <span class="fn">(<span class="fn">uri</span>, <span class="fn">fw</span>)</span> => <span class="fn">do
          let <span class="fn">a</span> ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.get">ST.Ref.get</a> <span class="fn"><span class="fn">fw</span>.pendingRequestsRef</span></span>
          <span class="fn">if <span class="fn"><span class="fn"><a href="/Unicode.lean/Std/Data/RBMap.html#Std.RBMap.contains">Std.RBMap.contains</a> <span class="fn">a</span> <span class="fn"><span class="fn">p</span>.id</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">do
              <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.tryWriteMessage">Lean.Server.Watchdog.tryWriteMessage</a> <span class="fn">uri</span>
                  (<span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message.notification">Lean.JsonRpc.Message.notification</a> <span class="fn"><span class="fn">{ method := <span class="fn">"$/cancelRequest"</span>, param := <span class="fn">p</span> }</span>.method</span>
                    (<span class="fn"><a href="/Unicode.lean/Init/Control/Except.html#Except.toOption">Except.toOption</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.Json.toStructured?">Lean.Json.toStructured?</a> <span class="fn"><span class="fn">{ method := <span class="fn">"$/cancelRequest"</span>, param := <span class="fn">p</span> }</span>.param</span></span>)</span>)</span>)
                  <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a></span>
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span>
            else <span class="fn">do
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span></span></span></span></span></span>
  let x : <a href="/Unicode.lean/Init/Prelude.html#PUnit">PUnit</a> := <span class="fn">r</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.forwardNotification">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L492-L493">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.forwardNotification">Lean.Server.Watchdog.forwardNotification</a>
</span>
<span class="impl_arg">
<span class="decl_args">
<span class="fn">{α : <span class="fn">Type</span>}</span></span>
</span>
<span class="impl_arg">
<span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.ToJson">Lean.ToJson</a> <span class="fn">α</span></span>]</span></span>
</span>
<span class="impl_arg">
<span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href="/Unicode.lean/Lean/Server/FileSource.html#Lean.Lsp.FileSource">Lean.Lsp.FileSource</a> <span class="fn">α</span></span>]</span></span>
</span>
<span class="decl_args">
<span class="fn">(method : <a href="/Unicode.lean/Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(params : <span class="fn">α</span>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.forwardNotification">Lean.Server.Watchdog.forwardNotification</a> <span class="fn">method</span> <span class="fn">params</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.tryWriteMessage">Lean.Server.Watchdog.tryWriteMessage</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/FileSource.html#Lean.Lsp.FileSource.fileSource">Lean.Lsp.fileSource</a> <span class="fn">params</span></span>)
    (<span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message.notification">Lean.JsonRpc.Message.notification</a> <span class="fn"><span class="fn">{ method := <span class="fn">method</span>, param := <span class="fn">params</span> }</span>.method</span>
      (<span class="fn"><a href="/Unicode.lean/Init/Control/Except.html#Except.toOption">Except.toOption</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.Json.toStructured?">Lean.Json.toStructured?</a> <span class="fn"><span class="fn">{ method := <span class="fn">method</span>, param := <span class="fn">params</span> }</span>.param</span></span>)</span>)</span>)
    <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.parseParams">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L497-L500">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.parseParams">Lean.Server.Watchdog.parseParams</a>
</span>
<span class="decl_args">
<span class="fn">(paramType : <span class="fn">Type</span>)</span></span>
<span class="impl_arg">
<span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.FromJson">Lean.FromJson</a> <span class="fn">paramType</span></span>]</span></span>
</span>
<span class="decl_args">
<span class="fn">(params : <a href="/Unicode.lean/Lean/Data/Json/Basic.html#Lean.Json">Lean.Json</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <span class="fn">paramType</span></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.parseParams">Lean.Server.Watchdog.parseParams</a> <span class="fn">paramType</span> <span class="fn">params</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.FromJson.fromJson?">Lean.fromJson?</a> <span class="fn">params</span></span> with
  | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Except.error">Except.ok</a> <span class="fn">parsed</span></span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">parsed</span></span>
  | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Except.error">Except.error</a> <span class="fn">inner</span></span> =>
    <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a>
      (<span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#IO.throwServerError">IO.throwServerError</a>
        (<span class="fn"><span class="fn"><span class="fn"><span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"Got param with wrong structure: "</span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/Printer.html#Lean.Json.compress">Lean.Json.compress</a> <span class="fn">params</span></span>)</span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"\n"</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a>             <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">inner</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a>           <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">""</span></span></span>)</span>)</span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.forwardRequestToWorker">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L502-L527">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.forwardRequestToWorker">Lean.Server.Watchdog.forwardRequestToWorker</a>
</span>
<span class="decl_args">
<span class="fn">(id : <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID">Lean.JsonRpc.RequestID</a>)</span></span>
<span class="decl_args">
<span class="fn">(method : <a href="/Unicode.lean/Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(params : <a href="/Unicode.lean/Lean/Data/Json/Basic.html#Lean.Json">Lean.Json</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.forwardRequestToWorker">Lean.Server.Watchdog.forwardRequestToWorker</a> <span class="fn">id</span> <span class="fn">method</span> <span class="fn">params</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn">let _do_jp := <span class="fn">fun <span class="fn">uri</span> => <span class="fn">do
    let discr ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findFileWorker?">Lean.Server.Watchdog.findFileWorker?</a> <span class="fn">uri</span></span>
    <span class="fn">match <span class="fn">discr</span> with
      | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">fw</span></span> =>
        <span class="fn">let r := <span class="fn">{ id := <span class="fn">id</span>, method := <span class="fn">method</span>, param := <span class="fn">params</span> }</span>;
        <span class="fn">do
        <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.modify">ST.Ref.modify</a> <span class="fn"><span class="fn">fw</span>.pendingRequestsRef</span> <span class="fn">fun <span class="fn">a</span> =>
            <span class="fn"><a href="/Unicode.lean/Std/Data/RBMap.html#Std.RBMap.insert">Std.RBMap.insert</a> <span class="fn">a</span> <span class="fn">id</span>
              (<span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message.request">Lean.JsonRpc.Message.request</a> <span class="fn"><span class="fn">r</span>.id</span> <span class="fn"><span class="fn">r</span>.method</span> (<span class="fn"><a href="/Unicode.lean/Init/Control/Except.html#Except.toOption">Except.toOption</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.Json.toStructured?">Lean.Json.toStructured?</a> <span class="fn"><span class="fn">r</span>.param</span></span>)</span>)</span>)</span></span></span>
        <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.tryWriteMessage">Lean.Server.Watchdog.tryWriteMessage</a> <span class="fn">uri</span>
            (<span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message.request">Lean.JsonRpc.Message.request</a> <span class="fn"><span class="fn">r</span>.id</span> <span class="fn"><span class="fn">r</span>.method</span> (<span class="fn"><a href="/Unicode.lean/Init/Control/Except.html#Except.toOption">Except.toOption</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.Json.toStructured?">Lean.Json.toStructured?</a> <span class="fn"><span class="fn">r</span>.param</span></span>)</span>)</span>) <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a></span></span></span>
      | <span class="fn">x</span> => <span class="fn">do
        let <span class="fn">a</span> ← <span class="fn">read</span>
        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a>
            (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspResponseError">IO.FS.Stream.writeLspResponseError</a> <span class="fn"><span class="fn">a</span>.hOut</span>
              <span class="fn">{ id := <span class="fn">id</span>, code := <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.ErrorCode.contentModified">Lean.JsonRpc.ErrorCode.contentModified</a>,
                message := <span class="fn"><span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"Cannot process request to closed file '"</span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">uri</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"'"</span></span></span>,
                data? := <span class="fn">none</span> }</span></span>)</span>
        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></span></span>;
  <span class="fn">if <span class="fn">(<span class="fn"><span class="fn">method</span> <a href="/Unicode.lean/Init/Prelude.html#BEq.beq">==</a> <span class="fn">"$/lean/rpc/connect"</span></span>) <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">do
    let ps ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.parseParams">Lean.Server.Watchdog.parseParams</a> <a href="/Unicode.lean/Lean/Data/Lsp/Extra.html#Lean.Lsp.RpcConnectParams">Lean.Lsp.RpcConnectParams</a> <span class="fn">params</span></span>
    let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/FileSource.html#Lean.Lsp.FileSource.fileSource">Lean.Lsp.fileSource</a> <span class="fn">ps</span></span>)</span>
    <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span>
  else <span class="fn">do
    let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Requests.html#Lean.Server.routeLspRequest">Lean.Server.routeLspRequest</a> <span class="fn">method</span> <span class="fn">params</span></span>)</span>
    <span class="fn">match <span class="fn">a</span> with
      | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Except.ok">Except.error</a> <span class="fn">e</span></span> => <span class="fn">do
        let a ← <span class="fn">read</span>
        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspResponseError">IO.FS.Stream.writeLspResponseError</a> <span class="fn"><span class="fn">a</span>.hOut</span> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Requests.html#Lean.Server.RequestError.toLspResponseError">Lean.Server.RequestError.toLspResponseError</a> <span class="fn">id</span> <span class="fn">e</span></span>)</span>)</span>
        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span>
      | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Except.ok">Except.ok</a> <span class="fn">uri</span></span> => <span class="fn">do
        let <span class="fn">y</span> ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">uri</span></span>
        <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span></span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleRequest">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L529-L557">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleRequest">Lean.Server.Watchdog.handleRequest</a>
</span>
<span class="decl_args">
<span class="fn">(id : <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID">Lean.JsonRpc.RequestID</a>)</span></span>
<span class="decl_args">
<span class="fn">(method : <a href="/Unicode.lean/Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(params : <a href="/Unicode.lean/Lean/Data/Json/Basic.html#Lean.Json">Lean.Json</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleRequest">Lean.Server.Watchdog.handleRequest</a> <span class="fn">id</span> <span class="fn">method</span> <span class="fn">params</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn">let handle := <span class="fn">fun <span class="fn">α</span> <span class="fn">β</span> [<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.FromJson">Lean.FromJson</a> <span class="fn">α</span></span>] [<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.ToJson">Lean.ToJson</a> <span class="fn">β</span></span>] <span class="fn">handler</span> => <span class="fn">do
    let a ← <span class="fn">read</span>
    let hOut : <a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a> := <span class="fn"><span class="fn">a</span>.hOut</span>
    <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#MonadExcept.tryCatch">tryCatch</a>
        (<span class="fn">do
          let params ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.parseParams">Lean.Server.Watchdog.parseParams</a> <span class="fn">α</span> <span class="fn">params</span></span>
          let result ← <span class="fn"><span class="fn">handler</span> <span class="fn">params</span></span>
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspResponse">IO.FS.Stream.writeLspResponse</a> <span class="fn">hOut</span> <span class="fn">{ id := <span class="fn">id</span>, result := <span class="fn">result</span> }</span></span>)</span></span>)
        <span class="fn">fun <span class="fn">ex</span> =>
        <span class="fn">let e := <span class="fn">ex</span>;
        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a>
          (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspResponseError">IO.FS.Stream.writeLspResponseError</a> <span class="fn">hOut</span>
            <span class="fn">{ id := <span class="fn">id</span>, code := <a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.ErrorCode.internalError">Lean.JsonRpc.ErrorCode.internalError</a>,
              message :=
                <span class="fn"><span class="fn"><span class="fn"><span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"Failed to process request "</span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">id</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">": "</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">e</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">""</span></span></span>,
              data? := <span class="fn">none</span> }</span></span>)</span></span></span></span></span></span>;
  <span class="fn">let _do_jp := <span class="fn">fun <span class="fn">y</span> =>
    <span class="fn">match <span class="fn">method</span> with
    | <span class="fn">"textDocument/references"</span> =>
      <span class="fn"><span class="fn">handle</span> <a href="/Unicode.lean/Lean/Data/Lsp/LanguageFeatures.html#Lean.Lsp.ReferenceParams">Lean.Lsp.ReferenceParams</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.Location">Lean.Lsp.Location</a></span>) <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleReference">Lean.Server.Watchdog.handleReference</a></span>
    | <span class="fn">"workspace/symbol"</span> =>
      <span class="fn"><span class="fn">handle</span> <a href="/Unicode.lean/Lean/Data/Lsp/LanguageFeatures.html#Lean.Lsp.WorkspaceSymbolParams">Lean.Lsp.WorkspaceSymbolParams</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Array">Array</a> <a href="/Unicode.lean/Lean/Data/Lsp/LanguageFeatures.html#Lean.Lsp.SymbolInformation">Lean.Lsp.SymbolInformation</a></span>)
        <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleWorkspaceSymbol">Lean.Server.Watchdog.handleWorkspaceSymbol</a></span>
    | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.forwardRequestToWorker">Lean.Server.Watchdog.forwardRequestToWorker</a> <span class="fn">id</span> <span class="fn">method</span> <span class="fn">params</span></span></span></span>;
  <span class="fn">if <span class="fn">(<span class="fn"><span class="fn"><span class="fn">method</span> <a href="/Unicode.lean/Init/Prelude.html#BEq.beq">==</a> <span class="fn">"textDocument/definition"</span></span> <a href="/Unicode.lean/Init/Prelude.html#or">||</a> <span class="fn"><span class="fn">method</span> <a href="/Unicode.lean/Init/Prelude.html#BEq.beq">==</a> <span class="fn">"textDocument/declaration"</span></span></span>) <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">do
    let params ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.parseParams">Lean.Server.Watchdog.parseParams</a> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.TextDocumentPositionParams">Lean.Lsp.TextDocumentPositionParams</a> <span class="fn">params</span></span>
    let definitions ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findDefinitions">Lean.Server.Watchdog.findDefinitions</a> <span class="fn">params</span></span>
    <span class="fn">if <span class="fn">(<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#not">!</a><span class="fn"><a href="/Unicode.lean/Init/Data/Array/Basic.html#Array.isEmpty">Array.isEmpty</a> <span class="fn">definitions</span></span></span>) <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">do
        let a ← <span class="fn">read</span>
        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspResponse">IO.FS.Stream.writeLspResponse</a> <span class="fn"><span class="fn">a</span>.hOut</span> <span class="fn">{ id := <span class="fn">id</span>, result := <span class="fn">definitions</span> }</span></span>)</span>
        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span>
      else <span class="fn">do
        let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
        <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span></span></span>
  else <span class="fn">do
    let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
    <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.handleNotification">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L559-L572">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleNotification">Lean.Server.Watchdog.handleNotification</a>
</span>
<span class="decl_args">
<span class="fn">(method : <a href="/Unicode.lean/Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(params : <a href="/Unicode.lean/Lean/Data/Json/Basic.html#Lean.Json">Lean.Json</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleNotification">Lean.Server.Watchdog.handleNotification</a> <span class="fn">method</span> <span class="fn">params</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn">let handle := <span class="fn">fun <span class="fn">α</span> [<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.FromJson">Lean.FromJson</a> <span class="fn">α</span></span>] <span class="fn">handler</span> => <span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.parseParams">Lean.Server.Watchdog.parseParams</a> <span class="fn">α</span> <span class="fn">params</span></span> <a href="/Unicode.lean/Init/Prelude.html#Bind.bind">>>=</a> <span class="fn">handler</span></span></span>;
  <span class="fn">match <span class="fn">method</span> with
  | <span class="fn">"textDocument/didOpen"</span> => <span class="fn"><span class="fn">handle</span> <a href="/Unicode.lean/Lean/Data/Lsp/TextSync.html#Lean.Lsp.DidOpenTextDocumentParams">Lean.Lsp.DidOpenTextDocumentParams</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleDidOpen">Lean.Server.Watchdog.handleDidOpen</a></span>
  | <span class="fn">"textDocument/didClose"</span> => <span class="fn"><span class="fn">handle</span> <a href="/Unicode.lean/Lean/Data/Lsp/TextSync.html#Lean.Lsp.DidCloseTextDocumentParams">Lean.Lsp.DidCloseTextDocumentParams</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleDidClose">Lean.Server.Watchdog.handleDidClose</a></span>
  | <span class="fn">"workspace/didChangeWatchedFiles"</span> =>
    <span class="fn"><span class="fn">handle</span> <a href="/Unicode.lean/Lean/Data/Lsp/Workspace.html#Lean.Lsp.DidChangeWatchedFilesParams">Lean.Lsp.DidChangeWatchedFilesParams</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleDidChangeWatchedFiles">Lean.Server.Watchdog.handleDidChangeWatchedFiles</a></span>
  | <span class="fn">"$/cancelRequest"</span> => <span class="fn"><span class="fn">handle</span> <a href="/Unicode.lean/Lean/Data/Lsp/Basic.html#Lean.Lsp.CancelParams">Lean.Lsp.CancelParams</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.handleCancelRequest">Lean.Server.Watchdog.handleCancelRequest</a></span>
  | <span class="fn">"$/lean/rpc/connect"</span> => <span class="fn"><span class="fn">handle</span> <a href="/Unicode.lean/Lean/Data/Lsp/Extra.html#Lean.Lsp.RpcConnectParams">Lean.Lsp.RpcConnectParams</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.forwardNotification">Lean.Server.Watchdog.forwardNotification</a> <span class="fn">method</span></span>)</span>
  | <span class="fn">"$/lean/rpc/release"</span> => <span class="fn"><span class="fn">handle</span> <a href="/Unicode.lean/Lean/Data/Lsp/Extra.html#Lean.Lsp.RpcReleaseParams">Lean.Lsp.RpcReleaseParams</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.forwardNotification">Lean.Server.Watchdog.forwardNotification</a> <span class="fn">method</span></span>)</span>
  | <span class="fn">"$/lean/rpc/keepAlive"</span> => <span class="fn"><span class="fn">handle</span> <a href="/Unicode.lean/Lean/Data/Lsp/Extra.html#Lean.Lsp.RpcKeepAliveParams">Lean.Lsp.RpcKeepAliveParams</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.forwardNotification">Lean.Server.Watchdog.forwardNotification</a> <span class="fn">method</span></span>)</span>
  | <span class="fn">x</span> =>
    <span class="fn">if <span class="fn">(<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#not">!</a><span class="fn"><a href="/Unicode.lean/Init/Data/String/Basic.html#String.isPrefixOf">String.isPrefixOf</a> <span class="fn">"$/"</span> <span class="fn">method</span></span></span>) <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">do
      let a ← <span class="fn">read</span>
      <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream.putStrLn">IO.FS.Stream.putStrLn</a> <span class="fn"><span class="fn">a</span>.hLog</span> (<span class="fn"><span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"Got unsupported notification: "</span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">method</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">""</span></span></span>)</span>)</span></span>
    else <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.shutdown">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L576-L581">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.shutdown">Lean.Server.Watchdog.shutdown</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.shutdown">Lean.Server.Watchdog.shutdown</a> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let a ← <span class="fn">read</span>
  let fileWorkers ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.get">ST.Ref.get</a> <span class="fn"><span class="fn">a</span>.fileWorkersRef</span></span>
  let r ←
    <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">fileWorkers</span> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">fun <span class="fn">x</span> <span class="fn">r</span> =>
        <span class="fn">match <span class="fn">x</span> with
        | <span class="fn">(<span class="fn">uri</span>, <span class="fn">x</span>)</span> => <span class="fn">do
          <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.terminateFileWorker">Lean.Server.Watchdog.terminateFileWorker</a> <span class="fn">uri</span></span>
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span></span></span></span>
  let x : <a href="/Unicode.lean/Init/Prelude.html#PUnit">PUnit</a> := <span class="fn">r</span>
  let r ←
    <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">fileWorkers</span> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a> <span class="fn">fun <span class="fn">x</span> <span class="fn">r</span> =>
        <span class="fn">match <span class="fn">x</span> with
        | <span class="fn">(<span class="fn">x</span>, <span class="fn">fw</span>)</span> => <span class="fn">do
          <span class="fn"><a href="/Unicode.lean/Init/Control/Basic.html#Functor.discard">discard</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.wait">IO.wait</a> <span class="fn"><span class="fn">fw</span>.commTask</span></span>)</span>)</span>
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>)</span></span></span></span></span>
  let x : <a href="/Unicode.lean/Init/Prelude.html#PUnit">PUnit</a> := <span class="fn">r</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.ServerEvent">
<div class="inductive">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L583-L586">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">inductive</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerEvent">Lean.Server.Watchdog.ServerEvent</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn">Type</span></div></div>
<ul class="constructors">
<li class="constructor" id="Lean.Server.Watchdog.ServerEvent.workerEvent">
workerEvent: <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.FileWorker">Lean.Server.Watchdog.FileWorker</a> → <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.WorkerEvent">Lean.Server.Watchdog.WorkerEvent</a> → <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerEvent">Lean.Server.Watchdog.ServerEvent</a></span></span></li>
<li class="constructor" id="Lean.Server.Watchdog.ServerEvent.clientMsg">
clientMsg: <span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a> → <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerEvent">Lean.Server.Watchdog.ServerEvent</a></span></li>
<li class="constructor" id="Lean.Server.Watchdog.ServerEvent.clientError">
clientError: <span class="fn"><a href="/Unicode.lean/Init/System/IOError.html#IO.Error">IO.Error</a> → <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerEvent">Lean.Server.Watchdog.ServerEvent</a></span></li>
</ul>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.runClientTask">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L588-L597">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.runClientTask">Lean.Server.Watchdog.runClientTask</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#Task">Task</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerEvent">Lean.Server.Watchdog.ServerEvent</a></span>)</span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.runClientTask">Lean.Server.Watchdog.runClientTask</a> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let st ← <span class="fn">read</span>
  let readMsgAction : <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerEvent">Lean.Server.Watchdog.ServerEvent</a></span> := <span class="fn">do
    let msg ← <span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.readLspMessage">IO.FS.Stream.readLspMessage</a> <span class="fn"><span class="fn">st</span>.hIn</span></span>
    <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerEvent.clientMsg">Lean.Server.Watchdog.ServerEvent.clientMsg</a> <span class="fn">msg</span></span>)</span></span>
  let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.asTask">IO.asTask</a> <span class="fn">readMsgAction</span> <a href="/Unicode.lean/Init/Core.html#Task.Priority.default">Task.Priority.default</a></span>)</span>
  let clientTask : <span class="fn"><a href="/Unicode.lean/Init/Core.html#Task">Task</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerEvent">Lean.Server.Watchdog.ServerEvent</a></span> :=
    <span class="fn"><a href="/Unicode.lean/Init/Core.html#Task.map">Task.map</a>
      (<span class="fn">fun <span class="fn">x</span> =>
        <span class="fn">match <span class="fn">x</span> with
        | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Except.error">Except.ok</a> <span class="fn">ev</span></span> => <span class="fn">ev</span>
        | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Except.error">Except.error</a> <span class="fn">e</span></span> => <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerEvent.clientError">Lean.Server.Watchdog.ServerEvent.clientError</a> <span class="fn">e</span></span></span></span>)
      <span class="fn">a</span></span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">clientTask</span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.mainLoop">
<div class="constant">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L599-L672">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">partial def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.mainLoop">Lean.Server.Watchdog.mainLoop</a>
</span>
<span class="decl_args">
<span class="fn">(clientTask : <span class="fn"><a href="/Unicode.lean/Init/Core.html#Task">Task</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerEvent">Lean.Server.Watchdog.ServerEvent</a></span>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.mkLeanServerCapabilities">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L675-L703">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.mkLeanServerCapabilities">Lean.Server.Watchdog.mkLeanServerCapabilities</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><a href="/Unicode.lean/Lean/Data/Lsp/Capabilities.html#Lean.Lsp.ServerCapabilities">Lean.Lsp.ServerCapabilities</a></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.mkLeanServerCapabilities">Lean.Server.Watchdog.mkLeanServerCapabilities</a> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a>   <span class="fn">{ textDocumentSync? :=
      <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a>
        <span class="fn">{ openClose := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>, change := <a href="/Unicode.lean/Lean/Data/Lsp/TextSync.html#Lean.Lsp.TextDocumentSyncKind.incremental">Lean.Lsp.TextDocumentSyncKind.incremental</a>, willSave := <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a>,
          willSaveWaitUntil := <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a>, save? := <span class="fn">none</span> }</span></span>,
    completionProvider? :=
      <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">{ triggerCharacters? := <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">#[<span class="fn">"."</span>]</span></span>, allCommitCharacters? := <span class="fn">none</span>, resolveProvider := <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a> }</span></span>,
    hoverProvider := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>, documentHighlightProvider := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>, documentSymbolProvider := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>,
    definitionProvider := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>, declarationProvider := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>, typeDefinitionProvider := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>, referencesProvider := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>,
    workspaceSymbolProvider := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>,
    semanticTokensProvider? :=
      <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a>
        <span class="fn">{ legend := <span class="fn">{ tokenTypes := <a href="/Unicode.lean/Lean/Data/Lsp/LanguageFeatures.html#Lean.Lsp.SemanticTokenType.names">Lean.Lsp.SemanticTokenType.names</a>, tokenModifiers := <span class="fn">#[]</span> }</span>, range := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a>,
          full := <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a> }</span></span> }</span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.initAndRunWatchdogAux">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L705-L719">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.initAndRunWatchdogAux">Lean.Server.Watchdog.initAndRunWatchdogAux</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.initAndRunWatchdogAux">Lean.Server.Watchdog.initAndRunWatchdogAux</a> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let st ← <span class="fn">read</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#MonadExcept.tryCatch">tryCatch</a>
      (<span class="fn">do
        <span class="fn"><a href="/Unicode.lean/Init/Control/Basic.html#Functor.discard">discard</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.readLspNotificationAs">IO.FS.Stream.readLspNotificationAs</a> <span class="fn"><span class="fn">st</span>.hIn</span> <span class="fn">"initialized"</span> <a href="/Unicode.lean/Lean/Data/Lsp/InitShutdown.html#Lean.Lsp.InitializedParams">Lean.Lsp.InitializedParams</a></span>)</span>)</span>
        let clientTask ← <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.runClientTask">Lean.Server.Watchdog.runClientTask</a>
        <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.mainLoop">Lean.Server.Watchdog.mainLoop</a> <span class="fn">clientTask</span></span></span>)
      <span class="fn">fun <span class="fn">err</span> => <span class="fn">do
      <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.shutdown">Lean.Server.Watchdog.shutdown</a>
      <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#MonadExcept.throw">throw</a> <span class="fn">err</span></span></span></span></span>
  let _do_jp : <span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message">Lean.JsonRpc.Message</a> → <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.ServerM">Lean.Server.Watchdog.ServerM</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></span> := <span class="fn">fun <span class="fn">discr</span> =>
    <span class="fn">match <span class="fn">discr</span> with
    | <span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message.notification">Lean.JsonRpc.Message.notification</a> <span class="fn">"exit"</span> <span class="fn">none</span></span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
    | <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#IO.throwServerError">IO.throwServerError</a> <span class="fn">"Got `shutdown` request, expected an `exit` notification"</span></span>)</span></span></span>
  let y ←
    <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#MonadExcept.tryCatch">tryCatch</a> (<span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.readLspMessage">IO.FS.Stream.readLspMessage</a> <span class="fn"><span class="fn">st</span>.hIn</span></span>)</span>) <span class="fn">fun <span class="fn">x</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.Message.notification">Lean.JsonRpc.Message.notification</a> <span class="fn">"exit"</span> <span class="fn">none</span></span>)</span></span></span>
  <span class="fn"><span class="fn">_do_jp</span> <span class="fn">y</span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.findWorkerPath">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L721-L727">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findWorkerPath">Lean.Server.Watchdog.findWorkerPath</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> <a href="/Unicode.lean/Init/System/FilePath.html#System.FilePath">System.FilePath</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findWorkerPath">Lean.Server.Watchdog.findWorkerPath</a> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let workerPath ← <a href="/Unicode.lean/Init/System/IO.html#IO.appPath">IO.appPath</a>
  let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.getEnv">IO.getEnv</a> <span class="fn">"LEAN_SYSROOT"</span></span>)</span>
  let _do_jp : <span class="fn"><a href="/Unicode.lean/Init/System/FilePath.html#System.FilePath">System.FilePath</a> → <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#PUnit">PUnit</a> → <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> <a href="/Unicode.lean/Init/System/FilePath.html#System.FilePath">System.FilePath</a></span></span></span> := <span class="fn">fun <span class="fn">workerPath</span> <span class="fn">y</span> => <span class="fn">do
    let a ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.getEnv">IO.getEnv</a> <span class="fn">"LEAN_WORKER_PATH"</span></span>)</span>
    let _do_jp : <span class="fn"><a href="/Unicode.lean/Init/System/FilePath.html#System.FilePath">System.FilePath</a> → <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#PUnit">PUnit</a> → <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> <a href="/Unicode.lean/Init/System/FilePath.html#System.FilePath">System.FilePath</a></span></span></span> := <span class="fn">fun <span class="fn">workerPath</span> <span class="fn">y</span> => <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">workerPath</span></span></span>
    <span class="fn">match <span class="fn">a</span> with
      | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">path</span></span> =>
        <span class="fn">let workerPath := <span class="fn">{ toString := <span class="fn">path</span> }</span>;
        <span class="fn">do
        let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
        <span class="fn"><span class="fn">_do_jp</span> <span class="fn">workerPath</span> <span class="fn">y</span></span></span></span>
      | <span class="fn">x</span> => <span class="fn">do
        let <span class="fn">y</span> ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
        <span class="fn"><span class="fn">_do_jp</span> <span class="fn">workerPath</span> <span class="fn">y</span></span></span></span></span></span>
  <span class="fn">match <span class="fn">a</span> with
    | <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">path</span></span> =>
      <span class="fn">let workerPath :=
        <span class="fn"><a href="/Unicode.lean/Init/System/FilePath.html#System.FilePath.withExtension">System.FilePath.withExtension</a> (<span class="fn"><span class="fn"><span class="fn">{ toString := <span class="fn">path</span> }</span> <a href="/Unicode.lean/Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn">{ toString := <span class="fn">"bin"</span> }</span></span> <a href="/Unicode.lean/Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn">{ toString := <span class="fn">"lean"</span> }</span></span>)
          <a href="/Unicode.lean/Init/System/FilePath.html#System.FilePath.exeExtension">System.FilePath.exeExtension</a></span>;
      <span class="fn">do
      let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
      <span class="fn"><span class="fn">_do_jp</span> <span class="fn">workerPath</span> <span class="fn">y</span></span></span></span>
    | <span class="fn">x</span> => <span class="fn">do
      let <span class="fn">y</span> ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
      <span class="fn"><span class="fn">_do_jp</span> <span class="fn">workerPath</span> <span class="fn">y</span></span></span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.loadReferences">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L729-L740">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.loadReferences">Lean.Server.Watchdog.loadReferences</a>
</span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> <a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References">Lean.Server.References</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.loadReferences">Lean.Server.Watchdog.loadReferences</a> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let oleanSearchPath ← <span class="fn"><a href="/Unicode.lean/Init/System/ST.html#ST.Ref.get">ST.Ref.get</a> <a href="/Unicode.lean/Lean/Util/Path.html#Lean.searchPathRef">Lean.searchPathRef</a></span>
  let refs : <a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References">Lean.Server.References</a> := <a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.empty">Lean.Server.References.empty</a>
  let a ← <span class="fn"><a href="/Unicode.lean/Lean/Util/Path.html#Lean.SearchPath.findAllWithExt">Lean.SearchPath.findAllWithExt</a> <span class="fn">oleanSearchPath</span> <span class="fn">"ilean"</span></span>
  let r ←
    <span class="fn"><a href="/Unicode.lean/Init/Core.html#ForIn.forIn">forIn</a> <span class="fn">a</span> <span class="fn">refs</span> <span class="fn">fun <span class="fn">path</span> <span class="fn">r</span> =>
        <span class="fn">let refs := <span class="fn">r</span>;
        <span class="fn">do
        let r ←
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#MonadExcept.tryCatch">tryCatch</a>
              (<span class="fn">do
                let a ← <span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.Ilean.load">Lean.Server.Ilean.load</a> <span class="fn">path</span></span>
                let refs : <a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References">Lean.Server.References</a> := <span class="fn"><a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References.addIlean">Lean.Server.References.addIlean</a> <span class="fn">refs</span> <span class="fn">path</span> <span class="fn">a</span></span>
                let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#PUnit.unit">PUnit.unit</a></span>
                <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">{ fst := <span class="fn">y</span>, snd := <span class="fn">refs</span> }</span></span></span>)
              <span class="fn">fun <span class="fn">x</span> => <span class="fn">do
              let y ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <a href="/Unicode.lean/Init/Prelude.html#Unit.unit">()</a></span>
              <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">{ fst := <span class="fn">y</span>, snd := <span class="fn">refs</span> }</span></span></span></span></span>
        let x : <a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References">Lean.Server.References</a> := <span class="fn"><span class="fn">r</span>.snd</span>
        let refs : <a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References">Lean.Server.References</a> := <span class="fn">x</span>
        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">r</span>.fst</span></span>
        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href="/Unicode.lean/Init/Core.html#ForInStep.yield">ForInStep.yield</a> <span class="fn">refs</span></span>)</span></span></span></span></span>
  let x : <a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References">Lean.Server.References</a> := <span class="fn">r</span>
  let refs : <a href="/Unicode.lean/Lean/Server/References.html#Lean.Server.References">Lean.Server.References</a> := <span class="fn">x</span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">refs</span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.initAndRunWatchdog">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L742-L787">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.initAndRunWatchdog">Lean.Server.Watchdog.initAndRunWatchdog</a>
</span>
<span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#List">List</a> <a href="/Unicode.lean/Init/Prelude.html#String">String</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(i : <a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a>)</span></span>
<span class="decl_args">
<span class="fn">(o : <a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream">IO.FS.Stream</a>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> <a href="/Unicode.lean/Init/Prelude.html#Unit">Unit</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.initAndRunWatchdog">Lean.Server.Watchdog.initAndRunWatchdog</a> <span class="fn">args</span> <span class="fn">i</span> <span class="fn">o</span> <span class="fn">e</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let workerPath ← <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.findWorkerPath">Lean.Server.Watchdog.findWorkerPath</a>
  let a ← <a href="/Unicode.lean/Lean/Util/Path.html#Lean.getBuildDir">Lean.getBuildDir</a>
  let srcSearchPath ← <span class="fn"><a href="/Unicode.lean/Lean/Util/Paths.html#Lean.initSrcSearchPath">Lean.initSrcSearchPath</a> <span class="fn">a</span> <span class="fn"><a href="/Unicode.lean/Init/Core.html#EmptyCollection.emptyCollection">∅</a></span></span>
  let a ← <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.loadReferences">Lean.Server.Watchdog.loadReferences</a>
  let references ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.mkRef">IO.mkRef</a> <span class="fn">a</span></span>)</span>
  let fileWorkersRef ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> (<span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.mkRef">IO.mkRef</a> <span class="fn">Std.RBMap.empty</span></span>)</span>
  let i ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Server.maybeTee">Lean.Server.maybeTee</a> <span class="fn">"wdIn.txt"</span> <a href="/Unicode.lean/Init/Prelude.html#Bool.false">false</a> <span class="fn">i</span></span>
  let o ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Server.maybeTee">Lean.Server.maybeTee</a> <span class="fn">"wdOut.txt"</span> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a> <span class="fn">o</span></span>
  let e ← <span class="fn"><a href="/Unicode.lean/Lean/Server/Utils.html#Lean.Server.maybeTee">Lean.Server.maybeTee</a> <span class="fn">"wdErr.txt"</span> <a href="/Unicode.lean/Init/Prelude.html#Bool.true">true</a> <span class="fn">e</span></span>
  let initRequest ← <span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.readLspRequestAs">IO.FS.Stream.readLspRequestAs</a> <span class="fn">i</span> <span class="fn">"initialize"</span> <a href="/Unicode.lean/Lean/Data/Lsp/InitShutdown.html#Lean.Lsp.InitializeParams">Lean.Lsp.InitializeParams</a></span>
  <span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspResponse">IO.FS.Stream.writeLspResponse</a> <span class="fn">o</span>
      <span class="fn">{ id := <span class="fn"><span class="fn">initRequest</span>.id</span>,
        result :=
          <span class="fn">{ capabilities := <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.mkLeanServerCapabilities">Lean.Server.Watchdog.mkLeanServerCapabilities</a>,
            serverInfo? := <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">{ name := <span class="fn">"Lean 4 Server"</span>, version? := <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> <span class="fn">"0.1.1"</span></span> }</span></span> }</span> }</span></span>
  <span class="fn"><a href="/Unicode.lean/Lean/Data/Lsp/Communication.html#IO.FS.Stream.writeLspRequest">IO.FS.Stream.writeLspRequest</a> <span class="fn">o</span>
      <span class="fn">{ id := <span class="fn"><a href="/Unicode.lean/Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID.str">Lean.JsonRpc.RequestID.str</a> <span class="fn">"register_ilean_watcher"</span></span>, method := <span class="fn">"client/registerCapability"</span>,
        param :=
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a>
            <span class="fn">{ registrations :=
                <span class="fn">#[<span class="fn">{ id := <span class="fn">"ilean_watcher"</span>, method := <span class="fn">"workspace/didChangeWatchedFiles"</span>,
                    registerOptions :=
                      <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.some">some</a> (<span class="fn"><a href="/Unicode.lean/Lean/Data/Json/FromToJson.html#Lean.ToJson.toJson">Lean.toJson</a> <span class="fn">{ watchers := <span class="fn">#[<span class="fn">{ globPattern := <span class="fn">"**/*.ilean"</span>, kind := <span class="fn">none</span> }</span>]</span> }</span></span>)</span> }</span>]</span> }</span></span> }</span></span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#ReaderT.run">ReaderT.run</a> <a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.initAndRunWatchdogAux">Lean.Server.Watchdog.initAndRunWatchdogAux</a>
      <span class="fn">{ hIn := <span class="fn">i</span>, hOut := <span class="fn">o</span>, hLog := <span class="fn">e</span>, args := <span class="fn">args</span>, fileWorkersRef := <span class="fn">fileWorkersRef</span>, initParams := <span class="fn"><span class="fn">initRequest</span>.param</span>,
        editDelay :=
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Option.getD">Option.getD</a> (<span class="fn"><a href="/Unicode.lean/Init/Data/Option/Basic.html#Option.bind">Option.bind</a> <span class="fn"><span class="fn"><span class="fn">initRequest</span>.param</span>.initializationOptions?</span> <a href="/Unicode.lean/Lean/Data/Lsp/InitShutdown.html#Lean.Lsp.InitializationOptions.editDelay?">Lean.Lsp.InitializationOptions.editDelay?</a></span>)
            <span class="fn">200</span></span>,
        workerPath := <span class="fn">workerPath</span>, srcSearchPath := <span class="fn">srcSearchPath</span>, references := <span class="fn">references</span> }</span></span></span></span></li>
</ul>
</details>
</div>
</div>
<div class="decl" id="Lean.Server.Watchdog.watchdogMain">
<div class="def">
<div class="gh_link">
<a href="https://github.com/leanprover/lean4/blob/6b1297fe85575c91cf613640bdd96cd1241d1a9e/src/Lean/Server/Watchdog.lean#L790-L799">source</a>
</div>
<div class="decl_header">
<span class="decl_kind">def</span>
<span class="decl_name">
<a class="break_within" href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.watchdogMain">Lean.Server.Watchdog.watchdogMain</a>
</span>
<span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#List">List</a> <a href="/Unicode.lean/Init/Prelude.html#String">String</a></span>)</span></span>
<span class="decl_args">:</span>
<div class="decl_type"><span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO">IO</a> <a href="/Unicode.lean/Init/Prelude.html#UInt32">UInt32</a></span></div></div>
<details>
<summary>Equations</summary>
<ul class="equations">
<li class="equation">
<span class="fn"><span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.watchdogMain">Lean.Server.Watchdog.watchdogMain</a> <span class="fn">args</span></span> <a href="/Unicode.lean/Init/Prelude.html#Eq">=</a> <span class="fn">do
  let i ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> <a href="/Unicode.lean/Init/System/IO.html#IO.getStdin">IO.getStdin</a></span>
  let o ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> <a href="/Unicode.lean/Init/System/IO.html#IO.getStdout">IO.getStdout</a></span>
  let e ← <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#liftM">liftM</a> <a href="/Unicode.lean/Init/System/IO.html#IO.getStderr">IO.getStderr</a></span>
  let r ←
    <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#MonadExcept.tryCatch">tryCatch</a>
        (<span class="fn">do
          <span class="fn"><a href="/Unicode.lean/Lean/Server/Watchdog.html#Lean.Server.Watchdog.initAndRunWatchdog">Lean.Server.Watchdog.initAndRunWatchdog</a> <span class="fn">args</span> <span class="fn">i</span> <span class="fn">o</span> <span class="fn">e</span></span>
          <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">0</span></span></span>)
        <span class="fn">fun <span class="fn">err</span> => <span class="fn">do
        <span class="fn"><a href="/Unicode.lean/Init/System/IO.html#IO.FS.Stream.putStrLn">IO.FS.Stream.putStrLn</a> <span class="fn">e</span> (<span class="fn"><span class="fn"><span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">"Watchdog error: "</span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">err</span></span></span> <a href="/Unicode.lean/Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="/Unicode.lean/Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">""</span></span></span>)</span>
        <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">1</span></span></span></span></span>
  <span class="fn"><a href="/Unicode.lean/Init/Prelude.html#Pure.pure">pure</a> <span class="fn">r</span></span></span></span></li>
</ul>
</details>
</div>
</div>
</main>
<nav class="nav">
<h3>General documentation</h3>
<div class="nav_link">
<a href="/Unicode.lean/">index</a>
</div>
<h3>Library</h3>
<div class="module_list">
<details class="nav_sect" data-path="/Unicode.lean/Init.html">
<summary>Init</summary>
<details class="nav_sect" data-path="/Unicode.lean/Init/Control.html">
<summary>Init.Control</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/Basic.html">Init.Control.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/EState.html">Init.Control.EState</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/Except.html">Init.Control.Except</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/ExceptCps.html">Init.Control.ExceptCps</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/Id.html">Init.Control.Id</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/Lawful.html">Init.Control.Lawful</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/Option.html">Init.Control.Option</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/Reader.html">Init.Control.Reader</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/State.html">Init.Control.State</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/StateCps.html">Init.Control.StateCps</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control/StateRef.html">Init.Control.StateRef</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data.html">
<summary>Init.Data</summary>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/Array.html">
<summary>Init.Data.Array</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Array/Basic.html">Init.Data.Array.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Array/BinSearch.html">Init.Data.Array.BinSearch</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Array/DecidableEq.html">Init.Data.Array.DecidableEq</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Array/InsertionSort.html">Init.Data.Array.InsertionSort</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Array/QSort.html">Init.Data.Array.QSort</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Array/Subarray.html">Init.Data.Array.Subarray</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/ByteArray.html">
<summary>Init.Data.ByteArray</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/ByteArray/Basic.html">Init.Data.ByteArray.Basic</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/Char.html">
<summary>Init.Data.Char</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Char/Basic.html">Init.Data.Char.Basic</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/Fin.html">
<summary>Init.Data.Fin</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Fin/Basic.html">Init.Data.Fin.Basic</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/FloatArray.html">
<summary>Init.Data.FloatArray</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/FloatArray/Basic.html">Init.Data.FloatArray.Basic</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/Format.html">
<summary>Init.Data.Format</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Format/Basic.html">Init.Data.Format.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Format/Instances.html">Init.Data.Format.Instances</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Format/Macro.html">Init.Data.Format.Macro</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Format/Syntax.html">Init.Data.Format.Syntax</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/Int.html">
<summary>Init.Data.Int</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Int/Basic.html">Init.Data.Int.Basic</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/List.html">
<summary>Init.Data.List</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/List/Basic.html">Init.Data.List.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/List/BasicAux.html">Init.Data.List.BasicAux</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/List/Control.html">Init.Data.List.Control</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/Nat.html">
<summary>Init.Data.Nat</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Nat/Basic.html">Init.Data.Nat.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Nat/Bitwise.html">Init.Data.Nat.Bitwise</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Nat/Control.html">Init.Data.Nat.Control</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Nat/Div.html">Init.Data.Nat.Div</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Nat/Gcd.html">Init.Data.Nat.Gcd</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Nat/Log2.html">Init.Data.Nat.Log2</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/Option.html">
<summary>Init.Data.Option</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Option/Basic.html">Init.Data.Option.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Option/BasicAux.html">Init.Data.Option.BasicAux</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Option/Instances.html">Init.Data.Option.Instances</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/String.html">
<summary>Init.Data.String</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/String/Basic.html">Init.Data.String.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/String/Extra.html">Init.Data.String.Extra</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/Data/ToString.html">
<summary>Init.Data.ToString</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/ToString/Basic.html">Init.Data.ToString.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/ToString/Macro.html">Init.Data.ToString.Macro</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Array.html">Init.Data.Array</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Basic.html">Init.Data.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/ByteArray.html">Init.Data.ByteArray</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Char.html">Init.Data.Char</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Fin.html">Init.Data.Fin</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Float.html">Init.Data.Float</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/FloatArray.html">Init.Data.FloatArray</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Format.html">Init.Data.Format</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Hashable.html">Init.Data.Hashable</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Int.html">Init.Data.Int</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/List.html">Init.Data.List</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Nat.html">Init.Data.Nat</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/OfScientific.html">Init.Data.OfScientific</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Option.html">Init.Data.Option</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Ord.html">Init.Data.Ord</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Random.html">Init.Data.Random</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Range.html">Init.Data.Range</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Repr.html">Init.Data.Repr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/Stream.html">Init.Data.Stream</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/String.html">Init.Data.String</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/ToString.html">Init.Data.ToString</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data/UInt.html">Init.Data.UInt</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Init/System.html">
<summary>Init.System</summary>
<div class="nav_link">
<a href="/Unicode.lean/Init/System/FilePath.html">Init.System.FilePath</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/System/IO.html">Init.System.IO</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/System/IOError.html">Init.System.IOError</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/System/Platform.html">Init.System.Platform</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/System/ST.html">Init.System.ST</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Init/Classical.html">Init.Classical</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Coe.html">Init.Coe</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Control.html">Init.Control</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Conv.html">Init.Conv</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Core.html">Init.Core</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Data.html">Init.Data</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Fix.html">Init.Fix</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Hints.html">Init.Hints</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Meta.html">Init.Meta</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Notation.html">Init.Notation</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/NotationExtra.html">Init.NotationExtra</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Prelude.html">Init.Prelude</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/SimpLemmas.html">Init.SimpLemmas</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/SizeOf.html">Init.SizeOf</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/System.html">Init.System</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/Util.html">Init.Util</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/WF.html">Init.WF</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Init/WFTactics.html">Init.WFTactics</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean.html" open="">
<summary>Lean</summary>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Compiler.html">
<summary>Lean.Compiler</summary>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Compiler/IR.html">
<summary>Lean.Compiler.IR</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/Basic.html">Lean.Compiler.IR.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/Borrow.html">Lean.Compiler.IR.Borrow</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/Boxing.html">Lean.Compiler.IR.Boxing</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/Checker.html">Lean.Compiler.IR.Checker</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/CompilerM.html">Lean.Compiler.IR.CompilerM</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/CtorLayout.html">Lean.Compiler.IR.CtorLayout</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/ElimDeadBranches.html">Lean.Compiler.IR.ElimDeadBranches</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/ElimDeadVars.html">Lean.Compiler.IR.ElimDeadVars</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/EmitC.html">Lean.Compiler.IR.EmitC</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/EmitUtil.html">Lean.Compiler.IR.EmitUtil</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/ExpandResetReuse.html">Lean.Compiler.IR.ExpandResetReuse</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/Format.html">Lean.Compiler.IR.Format</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/FreeVars.html">Lean.Compiler.IR.FreeVars</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/LiveVars.html">Lean.Compiler.IR.LiveVars</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/NormIds.html">Lean.Compiler.IR.NormIds</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/PushProj.html">Lean.Compiler.IR.PushProj</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/RC.html">Lean.Compiler.IR.RC</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/ResetReuse.html">Lean.Compiler.IR.ResetReuse</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/SimpCase.html">Lean.Compiler.IR.SimpCase</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/Sorry.html">Lean.Compiler.IR.Sorry</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR/UnboxResult.html">Lean.Compiler.IR.UnboxResult</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/BorrowedAnnotation.html">Lean.Compiler.BorrowedAnnotation</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/CSimpAttr.html">Lean.Compiler.CSimpAttr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/ClosedTermCache.html">Lean.Compiler.ClosedTermCache</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/ConstFolding.html">Lean.Compiler.ConstFolding</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/ExportAttr.html">Lean.Compiler.ExportAttr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/ExternAttr.html">Lean.Compiler.ExternAttr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/FFI.html">Lean.Compiler.FFI</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/IR.html">Lean.Compiler.IR</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/ImplementedByAttr.html">Lean.Compiler.ImplementedByAttr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/InitAttr.html">Lean.Compiler.InitAttr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/InlineAttrs.html">Lean.Compiler.InlineAttrs</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/NameMangling.html">Lean.Compiler.NameMangling</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/NeverExtractAttr.html">Lean.Compiler.NeverExtractAttr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/NoncomputableAttr.html">Lean.Compiler.NoncomputableAttr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/Specialize.html">Lean.Compiler.Specialize</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler/Util.html">Lean.Compiler.Util</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Data.html">
<summary>Lean.Data</summary>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Data/Json.html">
<summary>Lean.Data.Json</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Json/Basic.html">Lean.Data.Json.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Json/FromToJson.html">Lean.Data.Json.FromToJson</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Json/Parser.html">Lean.Data.Json.Parser</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Json/Printer.html">Lean.Data.Json.Printer</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Json/Stream.html">Lean.Data.Json.Stream</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Data/Lsp.html">
<summary>Lean.Data.Lsp</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/Basic.html">Lean.Data.Lsp.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/Capabilities.html">Lean.Data.Lsp.Capabilities</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/Client.html">Lean.Data.Lsp.Client</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/Communication.html">Lean.Data.Lsp.Communication</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/Diagnostics.html">Lean.Data.Lsp.Diagnostics</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/Extra.html">Lean.Data.Lsp.Extra</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/InitShutdown.html">Lean.Data.Lsp.InitShutdown</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/Internal.html">Lean.Data.Lsp.Internal</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/Ipc.html">Lean.Data.Lsp.Ipc</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/LanguageFeatures.html">Lean.Data.Lsp.LanguageFeatures</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/TextSync.html">Lean.Data.Lsp.TextSync</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/Utf16.html">Lean.Data.Lsp.Utf16</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp/Workspace.html">Lean.Data.Lsp.Workspace</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Data/Xml.html">
<summary>Lean.Data.Xml</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Xml/Basic.html">Lean.Data.Xml.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Xml/Parser.html">Lean.Data.Xml.Parser</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Format.html">Lean.Data.Format</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Json.html">Lean.Data.Json</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/JsonRpc.html">Lean.Data.JsonRpc</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/KVMap.html">Lean.Data.KVMap</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/LBool.html">Lean.Data.LBool</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/LOption.html">Lean.Data.LOption</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Lsp.html">Lean.Data.Lsp</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Name.html">Lean.Data.Name</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/NameTrie.html">Lean.Data.NameTrie</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Occurrences.html">Lean.Data.Occurrences</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/OpenDecl.html">Lean.Data.OpenDecl</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Options.html">Lean.Data.Options</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Parsec.html">Lean.Data.Parsec</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Position.html">Lean.Data.Position</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/PrefixTree.html">Lean.Data.PrefixTree</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Rat.html">Lean.Data.Rat</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/SMap.html">Lean.Data.SMap</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/SSet.html">Lean.Data.SSet</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Trie.html">Lean.Data.Trie</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data/Xml.html">Lean.Data.Xml</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Elab.html">
<summary>Lean.Elab</summary>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Elab/Deriving.html">
<summary>Lean.Elab.Deriving</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving/BEq.html">Lean.Elab.Deriving.BEq</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving/Basic.html">Lean.Elab.Deriving.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving/DecEq.html">Lean.Elab.Deriving.DecEq</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving/FromToJson.html">Lean.Elab.Deriving.FromToJson</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving/Hashable.html">Lean.Elab.Deriving.Hashable</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving/Inhabited.html">Lean.Elab.Deriving.Inhabited</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving/Ord.html">Lean.Elab.Deriving.Ord</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving/Repr.html">Lean.Elab.Deriving.Repr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving/SizeOf.html">Lean.Elab.Deriving.SizeOf</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving/Util.html">Lean.Elab.Deriving.Util</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Elab/PreDefinition.html">
<summary>Lean.Elab.PreDefinition</summary>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Elab/PreDefinition/Structural.html">
<summary>Lean.Elab.PreDefinition.Structural</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Structural/BRecOn.html">Lean.Elab.PreDefinition.Structural.BRecOn</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Structural/Basic.html">Lean.Elab.PreDefinition.Structural.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Structural/Eqns.html">Lean.Elab.PreDefinition.Structural.Eqns</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Structural/FindRecArg.html">Lean.Elab.PreDefinition.Structural.FindRecArg</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Structural/IndPred.html">Lean.Elab.PreDefinition.Structural.IndPred</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Structural/Main.html">Lean.Elab.PreDefinition.Structural.Main</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Structural/Preprocess.html">Lean.Elab.PreDefinition.Structural.Preprocess</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Structural/SmartUnfolding.html">Lean.Elab.PreDefinition.Structural.SmartUnfolding</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Elab/PreDefinition/WF.html">
<summary>Lean.Elab.PreDefinition.WF</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/WF/Eqns.html">Lean.Elab.PreDefinition.WF.Eqns</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/WF/Fix.html">Lean.Elab.PreDefinition.WF.Fix</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/WF/Main.html">Lean.Elab.PreDefinition.WF.Main</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/WF/PackDomain.html">Lean.Elab.PreDefinition.WF.PackDomain</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/WF/PackMutual.html">Lean.Elab.PreDefinition.WF.PackMutual</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/WF/Rel.html">Lean.Elab.PreDefinition.WF.Rel</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/WF/TerminationHint.html">Lean.Elab.PreDefinition.WF.TerminationHint</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Basic.html">Lean.Elab.PreDefinition.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Eqns.html">Lean.Elab.PreDefinition.Eqns</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Main.html">Lean.Elab.PreDefinition.Main</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/MkInhabitant.html">Lean.Elab.PreDefinition.MkInhabitant</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/Structural.html">Lean.Elab.PreDefinition.Structural</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition/WF.html">Lean.Elab.PreDefinition.WF</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Elab/Quotation.html">
<summary>Lean.Elab.Quotation</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Quotation/Precheck.html">Lean.Elab.Quotation.Precheck</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Quotation/Util.html">Lean.Elab.Quotation.Util</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Elab/Tactic.html">
<summary>Lean.Elab.Tactic</summary>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Elab/Tactic/Conv.html">
<summary>Lean.Elab.Tactic.Conv</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Conv/Basic.html">Lean.Elab.Tactic.Conv.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Conv/Change.html">Lean.Elab.Tactic.Conv.Change</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Conv/Congr.html">Lean.Elab.Tactic.Conv.Congr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Conv/Delta.html">Lean.Elab.Tactic.Conv.Delta</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Conv/Pattern.html">Lean.Elab.Tactic.Conv.Pattern</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Conv/Rewrite.html">Lean.Elab.Tactic.Conv.Rewrite</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Conv/Simp.html">Lean.Elab.Tactic.Conv.Simp</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Conv/Unfold.html">Lean.Elab.Tactic.Conv.Unfold</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Basic.html">Lean.Elab.Tactic.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/BuiltinTactic.html">Lean.Elab.Tactic.BuiltinTactic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Config.html">Lean.Elab.Tactic.Config</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Conv.html">Lean.Elab.Tactic.Conv</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Delta.html">Lean.Elab.Tactic.Delta</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/ElabTerm.html">Lean.Elab.Tactic.ElabTerm</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Generalize.html">Lean.Elab.Tactic.Generalize</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Induction.html">Lean.Elab.Tactic.Induction</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Injection.html">Lean.Elab.Tactic.Injection</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Location.html">Lean.Elab.Tactic.Location</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Match.html">Lean.Elab.Tactic.Match</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Meta.html">Lean.Elab.Tactic.Meta</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Rewrite.html">Lean.Elab.Tactic.Rewrite</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Simp.html">Lean.Elab.Tactic.Simp</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Split.html">Lean.Elab.Tactic.Split</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic/Unfold.html">Lean.Elab.Tactic.Unfold</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/App.html">Lean.Elab.App</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Arg.html">Lean.Elab.Arg</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Attributes.html">Lean.Elab.Attributes</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/AutoBound.html">Lean.Elab.AutoBound</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/AuxDef.html">Lean.Elab.AuxDef</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Binders.html">Lean.Elab.Binders</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/BindersUtil.html">Lean.Elab.BindersUtil</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/BuiltinCommand.html">Lean.Elab.BuiltinCommand</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/BuiltinNotation.html">Lean.Elab.BuiltinNotation</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/BuiltinTerm.html">Lean.Elab.BuiltinTerm</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Command.html">Lean.Elab.Command</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Config.html">Lean.Elab.Config</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/DeclModifiers.html">Lean.Elab.DeclModifiers</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/DeclUtil.html">Lean.Elab.DeclUtil</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Declaration.html">Lean.Elab.Declaration</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/DeclarationRange.html">Lean.Elab.DeclarationRange</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/DefView.html">Lean.Elab.DefView</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Deriving.html">Lean.Elab.Deriving</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Do.html">Lean.Elab.Do</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/ElabRules.html">Lean.Elab.ElabRules</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Exception.html">Lean.Elab.Exception</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Extra.html">Lean.Elab.Extra</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Frontend.html">Lean.Elab.Frontend</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/GenInjective.html">Lean.Elab.GenInjective</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Import.html">Lean.Elab.Import</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Inductive.html">Lean.Elab.Inductive</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/InfoTree.html">Lean.Elab.InfoTree</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/LetRec.html">Lean.Elab.LetRec</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Level.html">Lean.Elab.Level</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Log.html">Lean.Elab.Log</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Macro.html">Lean.Elab.Macro</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/MacroArgUtil.html">Lean.Elab.MacroArgUtil</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/MacroRules.html">Lean.Elab.MacroRules</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Match.html">Lean.Elab.Match</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/MatchAltView.html">Lean.Elab.MatchAltView</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Mixfix.html">Lean.Elab.Mixfix</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/MutualDef.html">Lean.Elab.MutualDef</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Notation.html">Lean.Elab.Notation</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Open.html">Lean.Elab.Open</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PatternVar.html">Lean.Elab.PatternVar</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/PreDefinition.html">Lean.Elab.PreDefinition</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Print.html">Lean.Elab.Print</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Quotation.html">Lean.Elab.Quotation</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/RecAppSyntax.html">Lean.Elab.RecAppSyntax</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/SetOption.html">Lean.Elab.SetOption</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/StructInst.html">Lean.Elab.StructInst</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Structure.html">Lean.Elab.Structure</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Syntax.html">Lean.Elab.Syntax</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/SyntheticMVars.html">Lean.Elab.SyntheticMVars</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Tactic.html">Lean.Elab.Tactic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Term.html">Lean.Elab.Term</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab/Util.html">Lean.Elab.Util</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Meta.html">
<summary>Lean.Meta</summary>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Meta/Match.html">
<summary>Lean.Meta.Match</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Match/Basic.html">Lean.Meta.Match.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Match/CaseArraySizes.html">Lean.Meta.Match.CaseArraySizes</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Match/CaseValues.html">Lean.Meta.Match.CaseValues</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Match/MVarRenaming.html">Lean.Meta.Match.MVarRenaming</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Match/Match.html">Lean.Meta.Match.Match</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Match/MatchEqs.html">Lean.Meta.Match.MatchEqs</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Match/MatchPatternAttr.html">Lean.Meta.Match.MatchPatternAttr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Match/MatcherInfo.html">Lean.Meta.Match.MatcherInfo</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Match/Value.html">Lean.Meta.Match.Value</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Meta/Tactic.html">
<summary>Lean.Meta.Tactic</summary>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Meta/Tactic/LinearArith.html">
<summary>Lean.Meta.Tactic.LinearArith</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/LinearArith/Basic.html">Lean.Meta.Tactic.LinearArith.Basic</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Meta/Tactic/Simp.html">
<summary>Lean.Meta.Tactic.Simp</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Simp/Main.html">Lean.Meta.Tactic.Simp.Main</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Simp/Rewrite.html">Lean.Meta.Tactic.Simp.Rewrite</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Simp/SimpAll.html">Lean.Meta.Tactic.Simp.SimpAll</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Simp/SimpCongrTheorems.html">Lean.Meta.Tactic.Simp.SimpCongrTheorems</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Simp/SimpTheorems.html">Lean.Meta.Tactic.Simp.SimpTheorems</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Simp/Types.html">Lean.Meta.Tactic.Simp.Types</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Apply.html">Lean.Meta.Tactic.Apply</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Assert.html">Lean.Meta.Tactic.Assert</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Assumption.html">Lean.Meta.Tactic.Assumption</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/AuxLemma.html">Lean.Meta.Tactic.AuxLemma</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Cases.html">Lean.Meta.Tactic.Cases</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Cleanup.html">Lean.Meta.Tactic.Cleanup</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Clear.html">Lean.Meta.Tactic.Clear</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Constructor.html">Lean.Meta.Tactic.Constructor</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Contradiction.html">Lean.Meta.Tactic.Contradiction</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Delta.html">Lean.Meta.Tactic.Delta</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/ElimInfo.html">Lean.Meta.Tactic.ElimInfo</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/FVarSubst.html">Lean.Meta.Tactic.FVarSubst</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Generalize.html">Lean.Meta.Tactic.Generalize</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Induction.html">Lean.Meta.Tactic.Induction</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Injection.html">Lean.Meta.Tactic.Injection</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Intro.html">Lean.Meta.Tactic.Intro</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/LinearArith.html">Lean.Meta.Tactic.LinearArith</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Rename.html">Lean.Meta.Tactic.Rename</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Replace.html">Lean.Meta.Tactic.Replace</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Revert.html">Lean.Meta.Tactic.Revert</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Rewrite.html">Lean.Meta.Tactic.Rewrite</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Simp.html">Lean.Meta.Tactic.Simp</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Split.html">Lean.Meta.Tactic.Split</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/SplitIf.html">Lean.Meta.Tactic.SplitIf</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Subst.html">Lean.Meta.Tactic.Subst</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Unfold.html">Lean.Meta.Tactic.Unfold</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic/Util.html">Lean.Meta.Tactic.Util</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/ACLt.html">Lean.Meta.ACLt</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/AbstractMVars.html">Lean.Meta.AbstractMVars</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/AbstractNestedProofs.html">Lean.Meta.AbstractNestedProofs</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/AppBuilder.html">Lean.Meta.AppBuilder</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Basic.html">Lean.Meta.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Check.html">Lean.Meta.Check</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Closure.html">Lean.Meta.Closure</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Coe.html">Lean.Meta.Coe</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/CollectFVars.html">Lean.Meta.CollectFVars</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/CollectMVars.html">Lean.Meta.CollectMVars</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/CongrTheorems.html">Lean.Meta.CongrTheorems</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Constructions.html">Lean.Meta.Constructions</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/DecLevel.html">Lean.Meta.DecLevel</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/DiscrTree.html">Lean.Meta.DiscrTree</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/DiscrTreeTypes.html">Lean.Meta.DiscrTreeTypes</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Eqns.html">Lean.Meta.Eqns</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/ExprDefEq.html">Lean.Meta.ExprDefEq</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/ForEachExpr.html">Lean.Meta.ForEachExpr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/FunInfo.html">Lean.Meta.FunInfo</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/GeneralizeTelescope.html">Lean.Meta.GeneralizeTelescope</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/GeneralizeVars.html">Lean.Meta.GeneralizeVars</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/GetConst.html">Lean.Meta.GetConst</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/GlobalInstances.html">Lean.Meta.GlobalInstances</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/IndPredBelow.html">Lean.Meta.IndPredBelow</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Inductive.html">Lean.Meta.Inductive</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/InferType.html">Lean.Meta.InferType</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Injective.html">Lean.Meta.Injective</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Instances.html">Lean.Meta.Instances</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/KAbstract.html">Lean.Meta.KAbstract</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/LevelDefEq.html">Lean.Meta.LevelDefEq</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Match.html">Lean.Meta.Match</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/MatchUtil.html">Lean.Meta.MatchUtil</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Offset.html">Lean.Meta.Offset</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/PPGoal.html">Lean.Meta.PPGoal</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/RecursorInfo.html">Lean.Meta.RecursorInfo</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Reduce.html">Lean.Meta.Reduce</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/ReduceEval.html">Lean.Meta.ReduceEval</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/SizeOf.html">Lean.Meta.SizeOf</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/SortLocalDecls.html">Lean.Meta.SortLocalDecls</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Structure.html">Lean.Meta.Structure</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/SynthInstance.html">Lean.Meta.SynthInstance</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Tactic.html">Lean.Meta.Tactic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/Transform.html">Lean.Meta.Transform</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/TransparencyMode.html">Lean.Meta.TransparencyMode</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/UnificationHint.html">Lean.Meta.UnificationHint</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta/WHNF.html">Lean.Meta.WHNF</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Parser.html">
<summary>Lean.Parser</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Attr.html">Lean.Parser.Attr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Basic.html">Lean.Parser.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Command.html">Lean.Parser.Command</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Do.html">Lean.Parser.Do</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Extension.html">Lean.Parser.Extension</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Extra.html">Lean.Parser.Extra</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Level.html">Lean.Parser.Level</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Module.html">Lean.Parser.Module</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/StrInterpolation.html">Lean.Parser.StrInterpolation</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Syntax.html">Lean.Parser.Syntax</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Tactic.html">Lean.Parser.Tactic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser/Term.html">Lean.Parser.Term</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/ParserCompiler.html">
<summary>Lean.ParserCompiler</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/ParserCompiler/Attribute.html">Lean.ParserCompiler.Attribute</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/PrettyPrinter.html">
<summary>Lean.PrettyPrinter</summary>
<details class="nav_sect" data-path="/Unicode.lean/Lean/PrettyPrinter/Delaborator.html">
<summary>Lean.PrettyPrinter.Delaborator</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/PrettyPrinter/Delaborator/Basic.html">Lean.PrettyPrinter.Delaborator.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/PrettyPrinter/Delaborator/Builtins.html">Lean.PrettyPrinter.Delaborator.Builtins</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/PrettyPrinter/Delaborator/Options.html">Lean.PrettyPrinter.Delaborator.Options</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/PrettyPrinter/Delaborator/SubExpr.html">Lean.PrettyPrinter.Delaborator.SubExpr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/PrettyPrinter/Delaborator/TopDownAnalyze.html">Lean.PrettyPrinter.Delaborator.TopDownAnalyze</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Lean/PrettyPrinter/Basic.html">Lean.PrettyPrinter.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/PrettyPrinter/Delaborator.html">Lean.PrettyPrinter.Delaborator</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/PrettyPrinter/Formatter.html">Lean.PrettyPrinter.Formatter</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/PrettyPrinter/Parenthesizer.html">Lean.PrettyPrinter.Parenthesizer</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Server.html" open="">
<summary>Lean.Server</summary>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Server/FileWorker.html">
<summary>Lean.Server.FileWorker</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/FileWorker/RequestHandling.html">Lean.Server.FileWorker.RequestHandling</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/FileWorker/Utils.html">Lean.Server.FileWorker.Utils</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/FileWorker/WidgetRequests.html">Lean.Server.FileWorker.WidgetRequests</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Server/Rpc.html">
<summary>Lean.Server.Rpc</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/Rpc/Basic.html">Lean.Server.Rpc.Basic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/Rpc/Deriving.html">Lean.Server.Rpc.Deriving</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/Rpc/RequestHandling.html">Lean.Server.Rpc.RequestHandling</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/AsyncList.html">Lean.Server.AsyncList</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/Completion.html">Lean.Server.Completion</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/FileSource.html">Lean.Server.FileSource</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/FileWorker.html">Lean.Server.FileWorker</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/InfoUtils.html">Lean.Server.InfoUtils</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/References.html">Lean.Server.References</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/Requests.html">Lean.Server.Requests</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/Rpc.html">Lean.Server.Rpc</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/Snapshots.html">Lean.Server.Snapshots</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server/Utils.html">Lean.Server.Utils</a>
</div>
<div class="nav_link" visible="">
<a href="/Unicode.lean/Lean/Server/Watchdog.html">Lean.Server.Watchdog</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Util.html">
<summary>Lean.Util</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/CollectFVars.html">Lean.Util.CollectFVars</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/CollectLevelParams.html">Lean.Util.CollectLevelParams</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/CollectMVars.html">Lean.Util.CollectMVars</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/FindExpr.html">Lean.Util.FindExpr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/FindLevelMVar.html">Lean.Util.FindLevelMVar</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/FindMVar.html">Lean.Util.FindMVar</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/FoldConsts.html">Lean.Util.FoldConsts</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/ForEachExpr.html">Lean.Util.ForEachExpr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/MonadBacktrack.html">Lean.Util.MonadBacktrack</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/MonadCache.html">Lean.Util.MonadCache</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/OccursCheck.html">Lean.Util.OccursCheck</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/PPExt.html">Lean.Util.PPExt</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/Path.html">Lean.Util.Path</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/Paths.html">Lean.Util.Paths</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/Profile.html">Lean.Util.Profile</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/RecDepth.html">Lean.Util.RecDepth</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/Recognizers.html">Lean.Util.Recognizers</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/ReplaceExpr.html">Lean.Util.ReplaceExpr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/ReplaceLevel.html">Lean.Util.ReplaceLevel</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/SCC.html">Lean.Util.SCC</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/Sorry.html">Lean.Util.Sorry</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util/Trace.html">Lean.Util.Trace</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Lean/Widget.html">
<summary>Lean.Widget</summary>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Widget/InteractiveCode.html">Lean.Widget.InteractiveCode</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Widget/InteractiveDiagnostic.html">Lean.Widget.InteractiveDiagnostic</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Widget/InteractiveGoal.html">Lean.Widget.InteractiveGoal</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Widget/TaggedText.html">Lean.Widget.TaggedText</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Attributes.html">Lean.Attributes</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/AuxRecursor.html">Lean.AuxRecursor</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Class.html">Lean.Class</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Compiler.html">Lean.Compiler</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/CoreM.html">Lean.CoreM</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Data.html">Lean.Data</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Declaration.html">Lean.Declaration</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/DeclarationRange.html">Lean.DeclarationRange</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/DocString.html">Lean.DocString</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Elab.html">Lean.Elab</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Environment.html">Lean.Environment</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Eval.html">Lean.Eval</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Exception.html">Lean.Exception</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Expr.html">Lean.Expr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/HeadIndex.html">Lean.HeadIndex</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Hygiene.html">Lean.Hygiene</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/ImportingFlag.html">Lean.ImportingFlag</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/InternalExceptionId.html">Lean.InternalExceptionId</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/KeyedDeclsAttribute.html">Lean.KeyedDeclsAttribute</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/LazyInitExtension.html">Lean.LazyInitExtension</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Level.html">Lean.Level</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/LoadDynlib.html">Lean.LoadDynlib</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/LocalContext.html">Lean.LocalContext</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Message.html">Lean.Message</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Meta.html">Lean.Meta</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/MetavarContext.html">Lean.MetavarContext</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Modifiers.html">Lean.Modifiers</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/MonadEnv.html">Lean.MonadEnv</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Parser.html">Lean.Parser</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/ParserCompiler.html">Lean.ParserCompiler</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/PrettyPrinter.html">Lean.PrettyPrinter</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/ProjFns.html">Lean.ProjFns</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/ReducibilityAttrs.html">Lean.ReducibilityAttrs</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/ResolveName.html">Lean.ResolveName</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Runtime.html">Lean.Runtime</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/ScopedEnvExtension.html">Lean.ScopedEnvExtension</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Server.html">Lean.Server</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Structure.html">Lean.Structure</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Syntax.html">Lean.Syntax</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/ToExpr.html">Lean.ToExpr</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Util.html">Lean.Util</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Lean/Widget.html">Lean.Widget</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Std.html">
<summary>Std</summary>
<details class="nav_sect" data-path="/Unicode.lean/Std/Data.html">
<summary>Std.Data</summary>
<div class="nav_link">
<a href="/Unicode.lean/Std/Data/AssocList.html">Std.Data.AssocList</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Std/Data/HashMap.html">Std.Data.HashMap</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Std/Data/HashSet.html">Std.Data.HashSet</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Std/Data/PersistentArray.html">Std.Data.PersistentArray</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Std/Data/PersistentHashMap.html">Std.Data.PersistentHashMap</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Std/Data/PersistentHashSet.html">Std.Data.PersistentHashSet</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Std/Data/RBMap.html">Std.Data.RBMap</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Std/Data/RBTree.html">Std.Data.RBTree</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Std/ShareCommon.html">Std.ShareCommon</a>
</div>
</details>
<details class="nav_sect" data-path="/Unicode.lean/Unicode.html">
<summary>Unicode</summary>
<details class="nav_sect" data-path="/Unicode.lean/Unicode/General.html">
<summary>Unicode.General</summary>
<div class="nav_link">
<a href="/Unicode.lean/Unicode/General/GeneralCategory.html">Unicode.General.GeneralCategory</a>
</div>
</details>
<div class="nav_link">
<a href="/Unicode.lean/Unicode/General.html">Unicode.General</a>
</div>
<div class="nav_link">
<a href="/Unicode.lean/Unicode/Includes.html">Unicode.Includes</a>
</div>
</details>
</div>
</nav>
<script>
siteRoot = "/Unicode.lean/";
      </script>
<script src="/Unicode.lean/nav.js">
</script>
<script src="/Unicode.lean/search.js">
</script>
<script src="/Unicode.lean/mathjax-config.js">
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6">
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</body>
</html>